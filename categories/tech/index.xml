<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Tech on pinkhello</title><link>https://pinkhello.cc/categories/tech/</link><description>Recent content in Tech on pinkhello</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>pinkhello</copyright><lastBuildDate>Mon, 28 Mar 2022 10:23:58 +0800</lastBuildDate><atom:link href="https://pinkhello.cc/categories/tech/index.xml" rel="self" type="application/rss+xml"/><item><title>Gitlab CI CD</title><link>https://pinkhello.cc/posts/cicd/</link><pubDate>Mon, 28 Mar 2022 10:23:58 +0800</pubDate><guid>https://pinkhello.cc/posts/cicd/</guid><description>åŸºæœ¬æ¦‚å¿µ CIï¼ŒContinuous Integration æŒç»­é›†æˆï¼Œ å³åœ¨ä»£ç æ„å»ºè¿‡ç¨‹ä¸­æŒç»­çš„å¯¹ä»£ç è¿›è¡Œé›†æˆã€æ„å»ºã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ CDï¼ŒContinuous Deployment æŒç»­äº¤ä»˜ï¼Œå³åœ¨ä»£ç æ„å»ºå®Œæ¯•åï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œéƒ¨ç½²ä¸Šçº¿ï¼Œå¿«é€Ÿè¿­ä»£äº¤ä»˜äº§å“ã€‚ Gitlab CI/CD å…ˆçœ‹ä¸€å¼ å›¾ï¼Œä»‹ç»äº† Gitlab CI/CD çš„å·¥ä½œæµç¨‹
ä¸Šå›¾æ˜¯ä¸€ä¸ªé€šç”¨çš„å¼€å‘æµç¨‹ï¼Œä»ä»£ç å®ç°å¼€å§‹ã€æäº¤ï¼Œé€šè¿‡ä»£ç çš„æ”¹å˜è§¦å‘ CI/CD pipelineï¼Œåç»­é€šè¿‡ CR å’Œ Approveï¼Œä»£ç æ‰åˆå¹¶è¿›å…¥åˆ†æ”¯/
æ›´ä¸°å¯Œçš„æ“ä½œ:
CI/CD pipelines pipelines åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒçš„ï¼Œå®ƒæ˜¯ CI/CD é¡¶çº§ç»„ä»¶ã€‚
Jobs å®šä¹‰äº†è¦åšä»€ä¹ˆã€‚(egï¼šcompile job or test job) Stages å®šä¹‰äº†å¦‚ä½•åšã€‚ å¦‚æœä¸€ä¸ª Stage ä¸­çš„æ‰€æœ‰çš„ Job éƒ½æˆåŠŸï¼Œåˆ™ pipeline è¿›å…¥ä¸‹ä¸€ä¸ª Stageã€‚ å¦‚æœä¸€ä¸ª Stage ä¸­ä»»ä½• Job å¤±è´¥ï¼Œä¸€èˆ¬ä¸ä¼šåˆ°ä¸‹ä¸€ä¸ª Stageï¼Œå¹¶ä¸” pipeline ä¼šæå‰ç»“æŸã€‚
å…¸å‹çš„ä¸€ä¸ª pipeline çš„æ“ä½œ:
build stageï¼Œ ä½¿ç”¨ä¸€ä¸ª job å» compile ä»£ç  test stageï¼Œä½¿ç”¨ å¤šä¸ª job å»è·‘ ut test staing stageï¼Œä½¿ç”¨ åˆ†å¸ƒéƒ¨ç½²é˜¶æ®µ production stageï¼Œå¯åŠ¨ job ç”Ÿæˆéƒ¨ç½²é˜¶æ®µ Jobs pipeline çš„é…ç½®ä» job å¼€å§‹äº†ï¼Œjob æ˜¯ .</description></item><item><title>Golang for Range æ¢ç©¶</title><link>https://pinkhello.cc/posts/golang-for-range-%E6%8E%A2%E7%A9%B6/</link><pubDate>Sun, 27 Mar 2022 14:20:28 +0800</pubDate><guid>https://pinkhello.cc/posts/golang-for-range-%E6%8E%A2%E7%A9%B6/</guid><description>å‰è¨€ ä»Šå¤©åœ¨ç”¨ Golang å†™ TCP é•¿é“¾æ¥çš„æ—¶å€™ï¼Œåœ¨åšæµ‹è¯•çš„æ—¶å€™ for range æœ‰åœ¨ç»“æ„åŒ…çš„æ—¶å€™æœ‰æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥å°±ç»†åŒ–æ¢ç©¶äº†ä¸€ä¸‹ã€‚
å¤ç° å‡è®¾æœ‰ä¸€ä¸ª Packet ç±»å‹([1024]byte)çš„æ•°æ®åŒ…,æˆ‘ä»¬ä»ç½‘ç»œä¸­è·å–åˆ°ä¸€ä¸ª [1024]Packet çš„æ•°æ®åŒ…ï¼Œæˆ‘ä»¬è¿›è¡Œéå†
type Packet [1024]byte func BenchmarkForStruct_test(b *testing.B) { var items [1024]Packet var result Packet for i := 0; i &amp;lt; b.N; i++ { for k := 0; k &amp;lt; len(items); k++ { result = items[k] } } _ = result } func BenchmarkRangeStruct_test(b *testing.B) { var items [1024]Packet var result Packet for i := 0; i &amp;lt; b.</description></item><item><title>ç»†è°ˆçº¿ç¨‹æ± è®¾è®¡ä¸ç›‘æ§</title><link>https://pinkhello.cc/posts/47-%E7%BB%86%E8%B0%88%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1%E4%B8%8E%E7%9B%91%E6%8E%A7/</link><pubDate>Sat, 05 Mar 2022 22:05:23 +0800</pubDate><guid>https://pinkhello.cc/posts/47-%E7%BB%86%E8%B0%88%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1%E4%B8%8E%E7%9B%91%E6%8E%A7/</guid><description>å‰è¨€ ä¸‡å¹´å…«è‚¡æ–‡ï¼Œåœ¨å·¥ä½œä¸­è‚¯å®šå¤šå¤šå°‘å°‘éƒ½ä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œä½†æœ‰æ²¡æœ‰çœŸæ­£çš„å»äº†è§£çº¿ç¨‹æ± çš„æ•´ä¸ªè¿è¡Œæœºåˆ¶å’Œæ ¸å¿ƒå…³é”®ç‚¹ã€‚ä»Šå¤©åˆ†äº«ä¸€ä¸‹ã€‚
çº¿ç¨‹æ± ç®€ä»‹ å…ˆè¯´ çº¿ç¨‹(Thread) , åœ¨ Wiki çš„è§£é‡Šæ˜¯æ“ä½œç³»ç»Ÿèƒ½è¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•å…ƒã€‚åŒ…å«åœ¨è¿›ç¨‹ä¸­ï¼Œæ˜¯è¿›ç¨‹å®é™…è¿ä½œçš„å•å…ƒã€‚ OKï¼Œå…ˆè®°ä½è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¯´ çº¿ç¨‹æ± (Thread Pool) ï¼Œé¡¾åæ€ä¹‰ï¼ŒåŸºäºæ± åŒ–æ€æƒ³çš„ç®¡ç†çº¿ç¨‹çš„æ‰‹æ®µï¼ˆå·¥å…·ï¼‰ã€‚æ—¢ç„¶å«çº¿ç¨‹æ± äº†ï¼Œå¯ä»¥ çŸ¥é“è‚¯å®šæ˜¯å¤šçº¿ç¨‹çš„æœåŠ¡ç¯å¢ƒä¸‹ã€‚
æˆ‘ä»¬éƒ½çŸ¥é“Serverçš„èµ„æºæ˜¯æœ‰é™çš„ï¼Œä¸å¯èƒ½æ— æ­¢å¢ƒçš„æ‰©å¼ ï¼ˆä»æˆæœ¬ã€è¿ç»´ä¸Šè€ƒè™‘ï¼‰ã€‚çº¿ç¨‹è¿‡åˆ†çš„å¼€è¾Ÿçš„è¯ï¼Œä¼šå¯¼è‡´æ•´ä½“æœåŠ¡å™¨èµ„æºåƒç´§ï¼ˆçº¿ç¨‹å¸¦æ¥çš„å¼€é”€ã€åˆ›å»ºã€è°ƒåº¦ç­‰ç­‰ï¼‰ã€‚ æ± åŒ–çš„æ€æƒ³ï¼Œçº¿ç¨‹æ± ç»´æŠ¤ç€å¤šä¸ªçº¿ç¨‹ï¼Œç­‰å¾…è°ƒåº¦åˆ†é…å¹¶å‘ä»»åŠ¡å»æ‰§è¡Œã€‚ä¸€æ–¹é¢é¿å…æœ‰ä»»åŠ¡å°±åˆ›å»ºçº¿ç¨‹å¸¦æ¥çš„é¢å¤–çš„å¼€é”€ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¿æŠ¤æœåŠ¡å™¨äº§ç”Ÿè¿‡å¤šçš„çº¿ç¨‹æ•°é‡ã€‚
çº¿ç¨‹æ± è§£å†³ä»€ä¹ˆé—®é¢˜ çº¿ç¨‹æ± è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯èµ„æºç®¡ç†é—®é¢˜ï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿå’ŒæœåŠ¡å¹¶ä¸çŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™éœ€è¦å¤šå°‘èµ„æºã€‚è€Œ æ± åŒ–(Pooling) æ€æƒ³ï¼Œå°±æ˜¯ä¸ºäº†å°†èµ„æºç»Ÿä¸€ç®¡ç†çš„æƒ…å†µä¸‹ï¼Œå‡å°é£é™©çš„æ€æƒ³ã€‚
Wikiä¸Š ThreadPoolå›¾
P.S : æ± åŒ–æ€æƒ³ä¸¾ä¾‹
å†…å­˜æ± (Memory Pool) å¯¹è±¡æ± (Object Pool) å³å®ä¾‹æ±  è¿æ¥æ± (Connection Pool) çº¿ç¨‹æ± æ ¸å¿ƒè®¾è®¡ åœ¨çœ‹çº¿ç¨‹æ± çš„è®¾è®¡ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹çº¿ç¨‹æ± çš„æ„é€ å‚æ•°
corePoolSize â€“ the number of threads to keep in the pool, even if they are idle, unless allowCoreThreadTimeOut is set maximumPoolSize â€“ the maximum number of threads to allow in the pool keepAliveTime â€“ when the number of threads is greater than the core, this is the maximum time that excess idle threads will wait for new tasks before terminating.</description></item><item><title>LRUCache çš„å®ç°</title><link>https://pinkhello.cc/posts/46-lrucache-%E5%AE%9E%E7%8E%B0/</link><pubDate>Thu, 10 Feb 2022 18:59:50 +0800</pubDate><guid>https://pinkhello.cc/posts/46-lrucache-%E5%AE%9E%E7%8E%B0/</guid><description>æ–‡å¼• è¦å®ç° LRU Cacheï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ LRU Cache çš„è¿è¡ŒåŸç†ã€‚
LRU Cache LRU (Least Recently Used) Cache æ˜¯ä¸€ç§ç¼“å­˜æ·˜æ±°ç®—æ³•ï¼Œæœ€å°‘æœ€è¿‘ä½¿ç”¨çš„Cacheã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ·˜æ±°çš„æ—¶å€™ï¼Œæ·˜æ±°çš„æ˜¯æœ€é•¿æ—¶é—´æœªä½¿ç”¨ï¼ˆæˆ–è€…ä½¿ç”¨æœ€å°‘ï¼‰çš„æ•°æ®
å¦‚ä¸‹å›¾ï¼Œå®¹é‡æ˜¯ä¸º 3 çš„ç¼“å­˜:
ä¸€å¼€å§‹ï¼ŒCache ä¸ºç©º,æ·»åŠ ä¸€ä¸ª 12 å…ƒç´ è¿›å…¥ï¼Œåé¢ä¾æ¬¡æ”¾å…¥äº† 11 å’Œ 10ã€‚è¿™æ—¶å€™å°†ç¼“å­˜å¡«æ»¡äº†ã€‚ å°†æ”¾å…¥ 9 çš„æ—¶å€™ï¼Œå› ä¸ºç¼“å­˜æ»¡äº†ï¼Œéœ€è¦ç§»é™¤æœ€é•¿æ—¶é—´æœªä½¿ç”¨çš„æ•°æ®ã€‚æ‰€ä»¥ 12 è¢«ç§»é™¤ï¼Œ9 è¢«åŠ å…¥ã€‚ P.S.: è¿™è¾¹æœªè€ƒè™‘ä½¿ç”¨æ“ä½œï¼Œå…¶å®ä¹Ÿå¯ä»¥æƒ³åƒçš„åˆ°ï¼Œå¦‚æœè¦æ˜¯ä½¿ç”¨äº†ï¼Œå°±å°†ä½¿ç”¨çš„å…ƒç´ ä»ç¼“å­˜ç§»é™¤ï¼Œé‡æ–°åŠ å…¥åˆ°ç¼“å­˜ä¸­
ç»è¿‡ä¸Šè¿°äº†è§£ï¼Œå·²ç»ç›´åˆ°äº† LRU çš„è¿è¡Œæœºåˆ¶ï¼Œè¿™æ ·æˆ‘ä»¬æ€»ç»“ç‰¹ç‚¹ï¼š
Cache å¤§å°å›ºå®šæœ‰é™ Cache Full åï¼Œåç»­æ“ä½œéƒ½éœ€è¦æ‰§è¡Œ LRU æ“ä½œ Cache æ“ä½œæ”¯æŒå¹¶å‘ Cache çš„ æ·»åŠ ã€æ’åºã€è·å– å°½é‡éƒ½æ˜¯ O(1) æ“ä½œ Structure of LRU Cache è¦è€ƒè™‘è®¾è®¡ LRU Cacheï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…¶ç‰¹ç‚¹æ¥è®¾è®¡ï¼š
ç‰¹æ€§1: LRU Cache æ˜¯ä¸€ä¸ª Queueï¼Œå¦‚æœ Queue é‡Œé¢çš„æŸä¸ªå…ƒç´ è¢«è®¿é—®äº†ï¼Œå®ƒåº”è¯¥è¢«è¿ç§»åˆ°æ·˜æ±°çš„æœ«ä½ã€‚ ç‰¹æ€§2:LRU Cache è¦æœ‰å›ºå®šå®¹é‡ï¼ˆå†…å­˜æœ‰é™ï¼‰, å½“æ–°åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œæ˜¯æ·»åŠ åˆ° Queue Headï¼›å½“å‘é€æ·˜æ±°çš„æ—¶å€™ï¼Œæ·˜æ±°çš„æ˜¯ Queue Tailã€‚ï¼ˆFIFOï¼‰ ç‰¹æ€§3: æŸ¥æ‰¾å‘½ä¸­ç¼“å­˜çš„æ•°æ®ï¼Œå¿…é¡»åœ¨ æœ€å°‘çš„å›ºå®šçš„æ—¶é—´å†… å®Œæˆã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬æˆ‘ä»¬å¿…é¡»å°½é‡ä¿è¯æ—¶é—´å¤æ‚åº¦ O(1) ç‰¹æ€§4: ç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å…ƒç´ ï¼Œä¹Ÿå¿…é¡»åœ¨ æœ€å°‘çš„å›ºå®šçš„æ—¶é—´å†… å®Œæˆã€‚åŒä¸Š O(1) è¦æ»¡è¶³ ç‰¹æ€§1 å’Œ ç‰¹æ€§2 è¿˜æ˜¯å¾ˆç®€å•çš„,è¦å®ç°ä¸€ä¸ª Queue æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°æ®ç»“æ„ å›ºå®šå¤§å°çš„Linked List æˆ– å›ºå®šå¤§å°çš„Array List åšå®ç°ã€‚ ä½†æ˜¯åœ¨å…¼é¡¾ ç‰¹æ€§3 çš„æ—¶å€™ï¼Œå¯ä»¥æƒ³è±¡åˆ°è¦å°½é‡ æ·»åŠ ã€å‘½ä¸­ éƒ½æ˜¯ O(1) æ“ä½œï¼Œåœ¨ Queue ä¸­åŸºæœ¬ä¸å¯èƒ½ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é¢„åˆ¤åˆ° HashMap å¯ä»¥æœ€å¤§åŒ–çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ å› ä¸ºHashMapæœ€ç†æƒ³çš„æƒ…å†µä¸‹è¾¾åˆ° å‘½ä¸­ç¼“å­˜ä¸º O(1) æ“ä½œï¼Œåˆ°æ­¤ï¼Œæˆ‘ä»¬å‘ç° LRU Cache çš„è®¾è®¡åº”è¯¥æ˜¯ HashMap + Listï¼› ä¸‹é¢å†å»è€ƒè™‘ ç‰¹æ€§4ï¼Œåœ¨ Cache æ»¡çš„æƒ…å†µä¸‹ï¼Œè€ƒè™‘æ¯æ¬¡æ·»åŠ æ–°çš„å…ƒç´ éƒ½è¦æ‰§è¡ŒLRUç­–ç•¥ï¼Œè¿™æ—¶å€™å¯é¢„è§çš„å¯¹äºè¿™ä¸ª Listçš„æ’å…¥``åˆ é™¤æ¯”æŸ¥è¯¢å¤šï¼Œ è‚¯å®šé€‰æ‹©æ˜¯ Linked Listï¼Œä¸”æ˜¯ DoublyLinkedList ä¸æ˜¯ SingleLinkedList (å‡ºäºæ“ä½œO(1)è€ƒè™‘)</description></item><item><title>å¦‚ä½•å»å®ç°RingBuffer</title><link>https://pinkhello.cc/posts/45-%E5%A6%82%E4%BD%95%E5%8E%BB%E5%AE%9E%E7%8E%B0ringbuffer/</link><pubDate>Thu, 10 Feb 2022 14:39:59 +0800</pubDate><guid>https://pinkhello.cc/posts/45-%E5%A6%82%E4%BD%95%E5%8E%BB%E5%AE%9E%E7%8E%B0ringbuffer/</guid><description>æ–‡å¼• RingBuffer, åå¦‚å…¶æ„: ç¯å½¢ç¼“å­˜åŒº/ç¯å½¢é˜Ÿåˆ—ï¼Œä¸åŒäºä¸€èˆ¬çš„é˜Ÿåˆ—ï¼Œç‰¹å¾æ˜¯é¦–å°¾ç›¸æ¥ã€‚
RingBuffer å¦‚ä½•å·¥ä½œçš„ RingBuffer æ˜¯ä¸€ä¸ªæœ‰ç•Œçš„å¾ªç¯çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦ç”¨äºå¤šçº¿ç¨‹ä¸‹è¿›è¡Œçš„æ•°æ®ç¼“å­˜ã€‚åœ¨æŒç»­çš„å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œåˆ°è¾¾æœ«å°¾çš„æ—¶å€™é“¾æ¥åˆ°å¤´ï¼Œæ•ˆæœä¸Šè¾¾æˆä¸€ä¸ªç¯çŠ¶ã€‚
å®ç°å®ƒçš„æ–¹å¼ å®ƒæ˜¯æœ‰ç•Œçš„æ•°ç»„å®ç°ï¼Œå¦‚å›¾ã€‚
è€Œä¸”æˆ‘ä»¬è¿˜è¦å…³æ³¨åˆ° readeræŒ‡é’ˆ ã€ writeræŒ‡é’ˆã€ å¤´å°¾ç›¸è¿
reader pointer ä¸‹ä¸€ä¸ªå¯è¯»å…ƒç´  writer pointer ä¸‹ä¸€ä¸ªå¯æ’å…¥çš„å…ƒç´  slot æ•°ç»„å¤´ å’Œ æ•°ç»„å°¾ ç›¸äº’é“¾æ¥ è®¨è®º ringbuffer çš„è¿è¡Œæ–¹å¼ ringbuffer çš„å…³é”®å‚æ•°, read seq &amp;amp; write seq
reader pointer seq =&amp;gt; ä» 0 å¼€å§‹ï¼Œéšç€è¯»å–æ¶ˆè€—ä¸€ä¸ªå…ƒç´  +1 writer pointer seq =&amp;gt; ä» -1 å¼€å§‹ï¼Œæ’å…¥ä¸€ä¸ªå…ƒç´ æ—¶å€™ +1 å¯ä»¥çœ‹å‡ºä¸¤ç§ Seq å¯¹ å®¹é‡è¿›è¡Œ Mod æ“ä½œå¯ä»¥å°† seq æ˜ å°„åˆ° ringbuffer çš„ index ä¸Š.
array_index = seq % capacity åŸºäºä¸Šé¢çš„æ€æƒ³ï¼Œæˆ‘ä»¬çœ‹ ringbuffer çš„æ ¸å¿ƒæ“ä½œ</description></item><item><title>Golangçš„æ± åŒ–è®¾è®¡</title><link>https://pinkhello.cc/posts/43-golang%E7%9A%84%E6%B1%A0%E5%8C%96%E8%AE%BE%E8%AE%A1/</link><pubDate>Wed, 02 Feb 2022 02:52:28 +0800</pubDate><guid>https://pinkhello.cc/posts/43-golang%E7%9A%84%E6%B1%A0%E5%8C%96%E8%AE%BE%E8%AE%A1/</guid><description>Why Poolï¼Ÿ å…ˆåŸ‹å‘: Go æœ‰æ²¡æœ‰æ± åŒ–çš„å¿…è¦? ä¸ºä»€ä¹ˆè¦æ± åŒ–? Go è‡ªä»å‡ºç”Ÿä»¥æ¥éƒ½è¢«æˆ‘ä»¬å† ä»¥&amp;quot;é«˜å¹¶å‘&amp;quot;çš„Tag, å›å¤´ç»†æƒ³å’Œæ·±ç©¶ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°å…¶å®éƒ½æ˜¯ç”± goroutine å®ç°çš„ , æˆ‘ä»¬éƒ½çŸ¥é“ ä¸ Thread ç›¸æ¯”ï¼Œ åˆ›å»º Goroutine çš„ä»£ä»·éå¸¸å°ã€‚ä»ç¨‹åºè¡¨ç°ä¸Šï¼Œä¹Ÿåƒæäº†Thread, æ¯ä¸ª Program è‡³å°‘åŒ…å«ä¸€ä¸ª Goroutine(è‡³å°‘ä¸€ä¸ª**Main Goroutine**) æ‰€æœ‰çš„å…¶ä»– Goroutines éƒ½ä¾é™„äº Main Goroutineï¼ˆå¦‚æœ Main Goroutine Terminated, å…¶ä»– Goroutines ä¹Ÿä¼š Terminatedï¼‰, Goroutine æ€»æ˜¯å·¥ä½œåœ¨åå°ã€‚
å¤šçº¿ç¨‹``å¤šè¿›ç¨‹æ˜¯ä¸ºäº†æé«˜ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ï¼Œå½“å‰ç³»ç»Ÿä¸‹ï¼Œè¿™è¾¹å°±éœ€è¦ç³»ç»Ÿè°ƒåº¦ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‹†åˆ†ä¸º &amp;quot;ç”¨æˆ·æ€&amp;quot;çº¿ç¨‹ å’Œ &amp;quot;å†…æ ¸æ€&amp;quot;çº¿ç¨‹ï¼Œè¿™ä¸¤è€…éœ€è¦è¿›è¡Œç»‘å®šï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§° å†…æ ¸æ€çº¿ç¨‹ ä¸ºçº¿ç¨‹ï¼Œç”¨æˆ·æ€çº¿ç¨‹ä¸ºåç¨‹
ä»ä¸Šé¢å¯ä»¥çœ‹å‡º åç¨‹ å’Œ çº¿ç¨‹ æœ‰æ˜ å°„å…³ç³»ï¼Œè¿™æ ·å°±æ¥äº† M:N å…³ç³»(ä¸ºä»€ä¹ˆä¸æ˜¯ 1:1, N:1 ? )
Goroutine ä¼˜ç‚¹:
ç›¸æ¯” Thread ä»£ä»·æ›´å° Goroutine å…¶åœ¨ stack çš„å¤§å°å¯ä»¥æ ¹æ®ç¨‹åºè¦æ±‚è¿›è¡Œå˜åŒ–ï¼Œä½†æ˜¯ Thread æ˜¯å›ºå®šçš„ Goroutine ä½¿ç”¨ Channel è¿›è¡Œé€šä¿¡ï¼ŒChannel ç”¨äº Goroutines è®¿é—®å…±äº«å†…å­˜çš„æ—¶å€™é˜²æ­¢ç«äº‰çš„ã€‚ ä»ç¨‹åºä¸Šä¸€ä¸ªçº¿ç¨‹å¯èƒ½æ‹¥æœ‰è®¸å¤šçš„ Goroutines å…³è”ï¼Œå¦‚æœè¿™äº›å…³è”çš„ æœ‰ä¸€ä¸ª Goroutine å»é˜»å¡äº†çº¿ç¨‹ï¼Œé‚£ä¹ˆå‰©ä½™çš„ Goroutine å°†åˆ†é…ç»™å…¶ä»–çš„ OS Threadï¼Œä¸”è¿™ç§åˆ‡æ¢æ“ä½œæ˜¯å¯¹å¼€å‘è€…å±è”½çš„ã€‚ Goroutine è°ƒåº¦å™¨ å›å¤´çœ‹å°† Goroutine å’Œ åç¨‹ æœ‰åŒºåˆ«çš„ã€‚è°ƒåº¦</description></item><item><title>MVCCåœ¨ä¸åŒçš„æ•°æ®åº“ä¹‹ä¸­çš„åº”ç”¨</title><link>https://pinkhello.cc/posts/40-mvcc%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/</link><pubDate>Thu, 02 Dec 2021 11:06:28 +0800</pubDate><guid>https://pinkhello.cc/posts/40-mvcc%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/</guid><description>MVCC é«˜å¹¶å‘æƒ…å†µ, åº”å¯¹æ•°æ®å†²çªé—®é¢˜ï¼Œä¸€èˆ¬ä¸¤ç§æ–¹å¼:
è§æ‹›æ‹†æ‹›ï¼Œé¿å…å†²çªï¼Œä½¿ç”¨ æ‚²è§‚é” ç¡®ä¿åŒæ—¶åˆ»åªèƒ½ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚ï¼ˆRead/Write Locksã€Two-Phase Locking) å¼€é—¨è¿å®¢ï¼Œå…è®¸å†²çªï¼Œä½†å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œè¦æœ‰èƒ½åŠ›æ£€æµ‹åˆ°ã€‚ï¼ˆä¹è§‚é”ï¼‰å…ˆè®¤ä¸ºä¸ä¼šå‘ç”Ÿå†²çªã€é™¤éæ£€æµ‹åˆ°å½“å‰ç¡®å®å†²çªäº†ã€‚ï¼ˆLogical Clockã€MVCC ï¼š Multi-Version Concurrent Control ï¼‰ MVCC
æ ¸å¿ƒæ€æƒ³: ä¸€ä¸ªæ•°æ®å¤šä¸ªå†å²ç‰ˆæœ¬ï¼Œä»è€Œè§£å†³äº‹åŠ¡ç®¡ç†ä¸­æ•°æ®éš”ç¦»çš„é—®é¢˜ã€‚
ç‰ˆæœ¬ &amp;mdash;&amp;gt; ä¸€èˆ¬é€‰æ‹©æ—¶é—´æˆ³ æˆ–è€… äº‹åŠ¡ID æ ‡è¯†
åœ¨å¤„ç†å†™è¯·æ±‚çš„æ—¶å€™ï¼Œ MVCC æ˜¯ä¸ºæ•°æ®æ·»åŠ ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„æ•°æ®ï¼›åœ¨è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œå…ˆç¡®å®šè¯»å–çš„ç‰ˆæœ¬ï¼Œæ ¹æ®ç‰ˆæœ¬æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ã€‚
https://dbdb.io/browse?concurrency-control=multi-version-concurrency-control-mvcc&amp;amp;q=
MYSQLä¸­ MVCC innodb-multi-versioning
InnoDB å†…éƒ¨ä¸ºæ¯ä¸€è¡Œè®°å½•æ·»åŠ  ä¸‰ä¸ªéšè—çš„åˆ—ï¼Œ
DB_TRX_ID åˆ›å»ºè®°å½•/æœ€åæ›´æ–°è®°å½•çš„äº‹åŠ¡ID,(åˆ é™¤ä¹Ÿè¢«è§†ä½œæ›´æ–°ï¼Œè®¾ç½®è¡Œçš„ç‰¹æ®Šä½æ ‡è®°ä½åˆ é™¤) DB_ROLL_PTR å›æ»šæŒ‡é’ˆï¼Œæ‰§è¡Œè¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬(rollback segment ï¼š undo logï¼Œè®°å½•äº†æ›´æ–°å‰é‡å»ºè¯¥è®°å½•çš„æ‰€éœ€çš„ä¿¡æ¯) DB_ROW_ID éšè—è‡ªå¢ID, å¦‚æœæ²¡æœ‰ä¸»é”®ï¼Œå°±ä¼šä»¥DB_ROW_ID äº§ç”Ÿèšç°‡ç´¢å¼•ï¼Œéšç€æ’å…¥æ–°è¡Œï¼Œè‡ªå¢çš„ï¼Œ rollback segment åˆ†ä¸ºä¸¤ç§
inert undo log ï¼Œä»…åœ¨äº‹åŠ¡å›æ»šçš„æ—¶å€™éœ€è¦ï¼Œäº‹åŠ¡æäº¤åç«‹å³ä¸¢å¼ƒ update undo log ï¼Œç”¨äºä¸€è‡´æ€§è¯»å–ï¼Œåªæœ‰åœ¨ æ²¡æœ‰äº‹åŠ¡å­˜åœ¨ï¼Œä¸” å¤´ä¿¡æ¯é‡Œé¢è¿˜æœ‰ä¸€ä¸ª delete_flag (bit) æ ‡è®°ä¸ºè¯¥è®°å½•æ˜¯å¦åˆ é™¤
[å¾…ä¸°å¯Œ]&amp;hellip;..
ETCD ä¸­ MVCC mvcc</description></item><item><title>æ¢ç§˜è´Ÿè½½å‡è¡¡</title><link>https://pinkhello.cc/posts/36-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E6%80%9D%E8%80%83/</link><pubDate>Fri, 01 Oct 2021 10:04:00 +0800</pubDate><guid>https://pinkhello.cc/posts/36-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E6%80%9D%E8%80%83/</guid><description>å‰è¨€ ä»Šå¤©æ˜¯å›½åº†çš„ç¬¬3å¤©ï¼Œåœ¨æ­¤æ­ç¥å°å“¥å“¥å’Œå°å§å§ä»¬â›±ï¸èŠ‚æ—¥å¿«ä¹ï¼ å¾®ä¿¡æœ‹å‹åœˆğŸ€„ï¸å…¨éƒ¨æ˜¯ æ—…é€”INGã€‚
æˆ‘çš„å›½åº†ï¼š
ç¬¬ä¸€å¤©: å¸¦ğŸª† ç¬¬äºŒå¤©: è¢«å¯ä¸œå‘äº†ä¸€å› ç¬¬ä¸‰å¤©: ğŸˆšï¸å­©ä¸€èº«è½» &amp;hellip;&amp;hellip; å¯¹äºæˆ‘è¿™ç§ç¤¾äº¤å°´å°¬è€…ï¼Œâ›±ï¸åº¦å‡æœ€å¥½çš„æ–¹å¼è¿˜æ˜¯å­¦ä¹ ã€‚
ä»Šæ—¥å¸¦æ¥äº† è‡ªå·±å¯¹äºè´Ÿè½½å‡è¡¡(load balance)çš„å­¦ä¹ ã€‚
åº¦å‡æœ€å¥½çš„æ–¹å¼æ˜¯å­¦ä¹  GRPCåœ¨è´Ÿè½½å‡è¡¡çš„è®¾è®¡: Load-balancing.md
ä¸ºä»€ä¹ˆè¦è´Ÿè½½å‡è¡¡ åœ¨å¦‚ä»Šçš„äº’è”ç½‘é¢†åŸŸï¼Œå¯¹äºæ•°æ®çš„å¤§çˆ†å‘ï¼Œé«˜é¢‘çš„è¯·æ±‚ï¼Œå¯¹äºæä¾›æœåŠ¡çš„ä¼ä¸šæ¥è¯´æ˜¯ä¸å°çš„ITèµ„æºå¼€é”€ã€‚ä¸ºäº†è§£å†³èµ„æºä¸­çš„è´Ÿè½½åˆ†é…ï¼Œå¹¶ä¸”ä½¿å¾—èµ„æºçš„åˆ©ç”¨ç‡è¾¾åˆ°æœ€å¤§ã€‚å‡ºç°äº†è´Ÿè½½å‡è¡¡ï¼Œä¸»è¦ä¸ºäº†è§£å†³ é«˜å¹¶å‘ å’Œ é«˜å¯ç”¨ã€‚
è´Ÿè½½å‡è¡¡çš„å®ç°æ–¹å¼æœ‰ï¼šè½¯ä»¶ å’Œ ç¡¬ä»¶ã€‚è¿™æ¬¡æˆ‘å­¦ä¹ çš„ä¸»æ˜¯è½¯ä»¶æ–¹å¼ã€‚
è´Ÿè½½å‡è¡¡çš„ç®—æ³• è½®è¯¢( Round Robin ) &amp;amp; åŠ æƒè½®è¯¢( Weight Round Robin ) : éšæœº &amp;amp; åŠ æƒéšæœº æœ€å°‘è¿æ¥( Last Connections ) : é€šè¿‡å°†æµé‡å¼•å¯¼åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨æœåŠ¡å™¨ç„¶åå°†è¯¥æœåŠ¡å™¨ç§»åŠ¨åˆ°é˜Ÿåˆ—åº•éƒ¨æ¥è½®æ¢æœåŠ¡å™¨ï¼Œå½“æœåŠ¡å™¨å…·æœ‰ç›¸åŒçš„è§„æ ¼å¹¶ä¸”æ²¡æœ‰å¾ˆå¤šæŒä¹…è¿æ¥æ—¶æœ€æœ‰ç”¨ã€‚ å“ˆå¸Œ( Hash ) eg: ip hash ä¸€è‡´æ€§å“ˆå¸Œ( Consistent Hash ) eg: request_url ä¸€è‡´æ€§å“ˆå¸Œ æœ€å°‘å“åº”æ—¶é—´ : å°†æµé‡å®šå‘åˆ°æ´»åŠ¨è¿æ¥æœ€å°‘ä¸”å¹³å‡å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡å™¨ã€‚ å¸¸ç”¨çš„è´Ÿè½½å‡è¡¡æ‰‹æ®µ Load-balancing.md å·²ç»ä»‹ç»äº†ä»¥ä¸‹å‡ ç§</description></item><item><title>çŸ­é“¾æ¥çš„æ€è€ƒä¸æŠ€æœ¯å®ç°</title><link>https://pinkhello.cc/posts/35-%E7%9F%AD%E9%93%BE%E6%8E%A5%E7%9A%84%E6%80%9D%E8%80%83%E4%B8%8E%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0/</link><pubDate>Sun, 05 Sep 2021 00:19:13 +0800</pubDate><guid>https://pinkhello.cc/posts/35-%E7%9F%AD%E9%93%BE%E6%8E%A5%E7%9A%84%E6%80%9D%E8%80%83%E4%B8%8E%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0/</guid><description>å‰æ åˆåˆ°äº†ä¸€æœˆä¸€åº¦çš„æ¸…ç†æ¶ˆæ¯çš„æ—¶å€™äº†,å¼€å§‹æ¸…ç†çŸ­ä¿¡,å¿½ç„¶è§åˆ°ä¸€ä¸ªå¹¸ç¦é‡Œçš„é€šçŸ¥çŸ­ä¿¡ï¼Œé‚£æ˜¯åœ¨çŸ­ä¿¡åˆ°è¾¾ä¹‹å‰ï¼Œæœ¬ğŸ¶æ‰“è‚¿è„¸å……èƒ–å­åœ¨å¹¸ç¦é‡Œå°ç¨‹åºé‡Œé¢å’¨è¯¢ä¸Šæµ·çš„ä¸€å¥—äºŒæ‰‹æˆ¿çš„ä»·æ ¼çš„ï¼Œåæ¥æ²¡å…³æ³¨ï¼Œ è¿™ä¸ªçŸ­é“¾æ¥ https://m.xflapp.com/s/vdwecR å¼•èµ·äº†æœ¬ğŸ¶çš„å…´è¶£.
æˆ‘å‘é—®ï¼šå¦‚ä½•å»å®ç°ä¸€ä¸ªçŸ­é“¾æ¥æœåŠ¡?
çŸ­é“¾æ¥çš„åŸç† çŸ­é“¾æ¥çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ?
æ„å»ºçš„çŸ­é“¾æ¥å’Œé•¿é“¾æ¥(æˆ‘ä»¬çœŸå®çš„è®¿é—®åœ°å€)çš„å”¯ä¸€å…³è”æ˜ å°„ã€ä¹Ÿå°±æ˜¯æ˜ å°„æ ‡è¯†ç”Ÿæˆç®—æ³•ã€‚
ä»è¿™ä¸ªå®šä¹‰ä¹Ÿèƒ½å¾—åˆ°çŸ­é“¾æ¥æœåŠ¡çš„å‡ ä¸ªç‰¹ç‚¹:
1âƒ£ï¸å…·æœ‰é«˜æ€§èƒ½ 2âƒ£ï¸æ˜¯æ’åˆ—ç»„åˆæ•°é‡é‡è¦è¶³å¤Ÿå¤§ 3âƒ£ï¸è¦å…·æœ‰ä¸æ˜“ç ´è§£ã€ä¸”ç ´è§£éš¾åº¦æå¤§ æ‹†è§£çŸ­é“¾æ¥ ğŸ‘†çš„çŸ­é“¾æ¥ https://m.xflapp.com/s/vdwecR æˆ‘æå‡ºäº†æˆ‘çš„ç¥å™¨ Chrome æ‰“å¼€äº†ä¸€ä¸‹ï¼Œç›´æ¥è·³è½¬åˆ°äº†http://m.haoduofangs.com/f100/activity/client/tt_im?app_id=13&amp;amp;customer_user_id=62800686641&amp;amp;realtor_id=3781951248937422. å¥½äº†ä»”ç»†çœ‹ä¸€ä¸‹è¯·æ±‚å’Œå“åº”,å“åº”çš„302,å“åº”å¤´ä¸­å¸¦äº†éœ€è¦è·³è½¬çš„åœ°å€.
ç»¼ä¸Šæˆ‘ç¤ºæ„å›¾:
å¯ä»¥çœ‹å‡ºæ¥,æ„å»ºå”¯ä¸€æ˜ å°„å…³ç³»æ˜¯å°†åŸæœ‰çš„å›ºå®šé•¿é“¾æ¥ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªçŸ­é“¾æ¥,1:Nå…³ç³»ã€‚ç”Ÿæˆçš„çŸ­é“¾æ¥å¿…é¡»æ»¡è¶³:
ä¸èƒ½è½»æ˜“çš„è¢«çŒœå‡ºæ¥(ç ´è§£),è¢«æ¶æ„éå†ã€‚ [ä¸€å®šæ—¶é—´å†…]ä¸èƒ½é‡å¤(ä¸€ä¸ªçŸ­é“¾æ¥åœ¨ä¸€å®šæ—¶é—´å†…åªèƒ½å¯¹åº”ä¸€ä¸ªé•¿é“¾æ¥ã€è¿™ä¸ªä¸€å®šæ—¶é—´å¯ä»¥æ˜¯æ°¸ä¹…) é•¿åº¦å°½é‡çŸ­ åœ¨çŸ­ä¿¡è¿è¥å•†ä¼šé™åˆ¶çŸ­ä¿¡çš„é•¿åº¦ã€å¦‚æœå¤ªé•¿ã€ç•™ç»™è¿è¥äººå‘˜æˆ–è€…å®¢æˆ·çš„çš„å­—ç¬¦é•¿åº¦ä¼šæœ‰ğŸš«ï¼Œè¿™ä¸æ˜¯ç»™åŒäº‹æˆ–å®¢æˆ·æŒ–å‘ä¹ˆã€‚ é“¾æ¥å˜äºŒç»´ç ï¼ŒäºŒç»´ç çš„ç‚¹ä½ä¼šéå¸¸å¯†é›†ï¼Œä¸åˆ©äºå®¢æˆ·ç«¯è¯†åˆ«å’Œä¼ è¾“ é•¿åº¦å¤ªé•¿ï¼Œä»ä¸ªäººæƒ…æ„Ÿé‡Œé¢ä¹Ÿæ¯”è¾ƒç¹çè¿™æ ·çš„é•¿é“¾æ¥ï¼Œä¸æ˜“è®°å½•å’Œè¾“å…¥ å›åˆ°è¿™ä¸ªå”¯ä¸€æ˜ å°„å…³ç³»ä¸Šæ¥ï¼Œå°±æ˜¯éœ€è¦å¯¹è¿™ä¸ªé•¿é“¾æ¥åš Hashï¼Œå’Œå¤§å¤šæ•°å“ˆå¸Œç®—æ³•ä¸€è‡´,ç”Ÿæˆç®—æ³•éœ€è¦å°±æ˜¯è¦å…·å¤‡å”¯ä¸€æ€§å’Œè¾ƒä½çš„ç¢°æ’ç‡çš„ç‰¹ç‚¹,è€Œåœ¨çŸ­é“¾æ¥åœºæ™¯ä¸‹ï¼Œåˆå†³å®šäº†å®ƒè¿˜è¦å…·å¤‡çŸ­çº¿ç²¾æ‚å¹¶ä¸”æ˜“äºä¼ è¾“çš„ç‰¹ç‚¹ã€‚
çŸ­é“¾æ¥å‹ç¼©ç”Ÿæˆç®—æ³•ç‰¹ç‚¹:
çŸ­å°ç²¾æ‚ã€æ˜“äºä¼ è¾“ é«˜åº¦å”¯ä¸€æ€§ ä½ç¢°æ’ç‡ çŸ­é“¾æ¥ç”Ÿæˆç®—æ³• ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåè®®ã€åŸŸåå‡ä¸ºä¸å¯å˜éƒ¨åˆ†ï¼Œèƒ½å®šåˆ¶çš„åªæœ‰å‹ç¼©ç (å“ˆå¸Œç ), é‚£ä¹ˆä½œä¸ºç¨‹åºğŸ¶èƒ½ç©çš„ä¹Ÿåªæœ‰è¿™éƒ¨åˆ†äº†ã€‚
å›åˆ°å¹¸ç¦é‡Œé€šçŸ¥çŸ­ä¿¡çš„çŸ­é“¾æ¥, å®ƒæŠ›æ‰åè®®å’ŒåŸŸåä¸¤éƒ¨åˆ†,è¿˜å‰©ä¸‹s/vdwecR, å¯ä»¥çœ‹å‡ºPathå…¶å®æ˜¯ä¸¤å±‚,ç¬¬ä¸€å±‚æ˜¯s,ç¬¬äºŒå±‚æ˜¯vdwecRï¼Œ å¯ä»¥æŠ½è±¡ä¸º{pathLevel1}/{pathLevel2},{pathLevel1}ä¸ºäº†ç®€çŸ­ä½¿ç”¨äº†å•ä¸ªå­—æ¯(å¯ä»¥åŒºåˆ†å¤§å°å†™)æˆ–è€…æ•°å­—, {pathLevel2} ä¸ºäº†æ»¡è¶³ä½ç¢°æ’ç‡å’Œå”¯ä¸€æ€§ï¼Œä½¿ç”¨äº†6ä½åŒºåˆ†å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆä½“ã€‚ é‚£ä¹ˆåƒè¿™ä¸ªç»„åˆä½“çš„æœ€å¤§ç»„åˆæ•°é‡æ˜¯å¤šå°‘å‘¢ï¼Ÿ{pathLevel1} å‡è®¾åªæœ‰ä¸€ä½, {pathLevel2} æœ‰6ä½,ä»å½“å‰çš„ä¾‹å­æ¥çœ‹ï¼Œä¸è€ƒè™‘å–å€¼ä¸ºæ•°å­—çš„å¯èƒ½ï¼Œé‚£ä¹ˆå®ƒçš„ç»„åˆæ•° æ¯ä¸ªå–å€¼éƒ½æ˜¯(26ä¸ªå¤§å†™å­—æ¯ + 26ä¸ªå°å†™å­—æ¯) ï¼Œä¹Ÿå°±æ˜¯ 52 ^ 7 = 1,028,071,702,528 ,å·²è¾¾ä¸‡äº¿çº§åˆ«æ•°é‡çº§ã€‚</description></item><item><title>Awsä¸Šmongoå¤‡ä»½è¿›å…¥S3</title><link>https://pinkhello.cc/posts/34-aws%E4%B8%8Amongo%E5%A4%87%E4%BB%BD%E8%BF%9B%E5%85%A5s3/</link><pubDate>Fri, 27 Aug 2021 17:58:15 +0800</pubDate><guid>https://pinkhello.cc/posts/34-aws%E4%B8%8Amongo%E5%A4%87%E4%BB%BD%E8%BF%9B%E5%85%A5s3/</guid><description>æœºå™¨å‡†å¤‡ å¼€å¯æ–°æœºå™¨, æ³¨æ„éœ€è¦å¤‡ä»½çš„æ•°æ®é‡ã€‚é€‰æ‹©ç£ç›˜æˆ–è€…æ•°æ®ç›˜å¤§å° è€æœºå™¨ä¸Š, ç£ç›˜åœ¨çº¿éœ€è¦æ‰©å®¹çš„è¯æ³¨æ„æ‰§è¡Œæ‰©å®¹ï¼Œè®©è®¾å¤‡åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿéƒ½è¯†åˆ« äº‘å°ä¸Šé€‰æ‹©éœ€è¦æ‰©å®¹çš„ç£ç›˜æ‰©å¤§åˆ°éœ€è¦çš„å¤§å°ï¼ˆå½“å‰æœºå™¨ä¸Šè¿˜æ— æ³•ç›´æ¥ä½¿ç”¨ï¼‰ è¿›å…¥æœºå™¨æ§åˆ¶å° # df -lh # lsblk # growpart ç£ç›˜è®¾å¤‡åç§° 1 # resize2fs ç£ç›˜æ–‡ä»¶ç³»ç»Ÿ # df -lh å¤‡ä»½è„šæœ¬å‡†å¤‡ backup.sh å¤‡ä»½è„šæœ¬ #!/bin/bash # å…¬å…± function æ—¥å¿—æ—¥æœŸæ ¼å¼ get_date () { date +[%Y-%m-%d\ %H:%M:%S] } ARCHIVE_OUT=$BACKUP_FILENAME_PREFIX-$(date +$BACKUP_FILENAME_DATE_FORMAT).tgz echo &amp;#34;ARCHIVE_OUT=$ARCHIVE_OUT&amp;#34; # ç”ŸæˆPOSTè¯·æ±‚æ•°æ® generate_post_data () { cat &amp;lt;&amp;lt;EOF { &amp;#34;group&amp;#34;:&amp;#34;alert-XXX&amp;#34;, &amp;#34;project&amp;#34;:&amp;#34;$S3_PATH$ARCHIVE_OUT&amp;#34;, &amp;#34;alert_message&amp;#34;:&amp;#34;å¤‡ä»½mongo2s3é”™è¯¯&amp;#34; } EOF } # Script echo &amp;#34;$(get_date)Mongo backup started&amp;#34; echo &amp;#34;$(get_date)[Step 1/4] Running mongodump: mongodump --forceTableScan -h $MONGO_HOST$MONGO_DB_ARG-u $MONGO_USERNAME-p $MONGO_PASSWORD--authenticationDatabase admin&amp;#34; # mongodump --quiet -h $MONGO_HOST:$MONGO_PORT $MONGO_DB_ARG -u $MONGO_USERNAME -p $MONGO_PASSWORD --authenticationDatabase admin mongodump --forceTableScan -h $MONGO_HOST $MONGO_DB_ARG -u $MONGO_USERNAME -p $MONGO_PASSWORD --authenticationDatabase admin echo &amp;#34;$(get_date)[Step 2/4] check dump directory: curl feishu .</description></item><item><title>RocketMQæºç é˜…è¯» Consumer</title><link>https://pinkhello.cc/posts/28-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-consumer/</link><pubDate>Sat, 31 Jul 2021 15:10:43 +0800</pubDate><guid>https://pinkhello.cc/posts/28-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-consumer/</guid><description>RocketMQ Consumer åˆ†ä¸ºä¸¤ç±»,
DefaultMQPullConsumer æ ‡è®°ä¸ºå¼ƒç”¨ DefaultMQPushConsumer æˆ‘ä»¬è¿™æ¬¡åªåˆ†æ DefaultMQPushConsumer
å½“å‰å…ˆçœ‹ä¸ª PushConsumer ä»£ç 
public class PushConsumer { public static void main(String[] args) throws InterruptedException, MQClientException { DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(&amp;#34;CID_JODIE_1&amp;#34;); /** * è®¾ç½®è®¢é˜…çš„ å¯ä»¥å¯¹æŒ‡å®šæ¶ˆæ¯è¿›è¡Œè¿‡æ»¤ï¼Œä¾‹å¦‚ï¼š&amp;#34;TopicTest&amp;#34;,&amp;#34;tagl||tag2||tag3&amp;#34;,*æˆ–nullè¡¨ç¤ºtopicæ‰€æœ‰æ¶ˆæ¯ */ consumer.subscribe(&amp;#34;TopicTest&amp;#34;, &amp;#34;*&amp;#34;); /** * CONSUME_FROM_LAST_OFFSET ç¬¬ä¸€æ¬¡å¯åŠ¨ä»é˜Ÿåˆ—æœ€åä½ç½®æ¶ˆè´¹ï¼Œåç»­å†å¯åŠ¨æ¥ç€ä¸Šæ¬¡æ¶ˆè´¹çš„è¿›åº¦å¼€å§‹æ¶ˆè´¹ * CONSUME_FROM_FIRST_OFFSET ç¬¬ä¸€æ¬¡å¯åŠ¨ä»é˜Ÿåˆ—åˆå§‹ä½ç½®æ¶ˆè´¹ï¼Œåç»­å†å¯åŠ¨æ¥ç€ä¸Šæ¬¡æ¶ˆè´¹çš„è¿›åº¦å¼€å§‹æ¶ˆè´¹ * CONSUME_FROM_TIMESTAMP ç¬¬ä¸€æ¬¡å¯åŠ¨ä»æŒ‡å®šæ—¶é—´ç‚¹ä½ç½®æ¶ˆè´¹ï¼Œåç»­å†å¯åŠ¨æ¥ç€ä¸Šæ¬¡æ¶ˆè´¹çš„è¿›åº¦å¼€å§‹æ¶ˆè´¹ */ consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); //wrong time format 2017_0422_221800 consumer.setConsumeTimestamp(&amp;#34;20181109221800&amp;#34;); /** * æ³¨å†Œå¹¶å‘æ¶ˆè´¹ï¼ˆæ¶ˆè´¹ç›‘å¬ï¼‰ */ consumer.</description></item><item><title>RocketMQæºç é˜…è¯» Producer</title><link>https://pinkhello.cc/posts/27-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-producer/</link><pubDate>Fri, 23 Jul 2021 15:10:37 +0800</pubDate><guid>https://pinkhello.cc/posts/27-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-producer/</guid><description>åœ¨æ¶ˆæ¯å‘é€çš„æ—¶å€™, æˆ‘ä»¬å…ˆçœ‹ Producer çš„å¯åŠ¨ä»£ç 
public class Producer { public static void main(String[] args) throws MQClientException, InterruptedException { DefaultMQProducer producer = new DefaultMQProducer(&amp;#34;ProducerGroupName&amp;#34;); producer.start(); for (int i = 0; i &amp;lt; 128; i++){ try { Message msg = new Message(&amp;#34;TopicTest&amp;#34;, &amp;#34;TagA&amp;#34;, &amp;#34;OrderID188&amp;#34;, &amp;#34;Hello world&amp;#34;.getBytes(RemotingHelper.DEFAULT_CHARSET)); SendResult sendResult = producer.send(msg); System.out.printf(&amp;#34;%s%n&amp;#34;, sendResult); } catch (Exception e) { e.printStackTrace(); } } producer.</description></item><item><title>RocketMQæºç é˜…è¯» NameServer</title><link>https://pinkhello.cc/posts/26-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-nameserver/</link><pubDate>Tue, 25 May 2021 19:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/26-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-nameserver/</guid><description>NameServer è§’è‰² NameSever åœ¨ RocketMQ èµ·åˆ°é‡è¦çš„è§’è‰²ï¼Œæ‰¿æ‹…ç€è·¯ç”±ç®¡ç†ã€æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
æ¥æ”¶ Broker çš„è¯·æ±‚æ³¨å†Œ Broker è·¯ç”±ä¿¡æ¯ æ¥æ”¶ Client è¯·æ±‚æ ¹æ®æŸä¸ª topic è·å–æ‰€æœ‰åˆ° broker çš„è·¯ç”±ä¿¡æ¯ NameSrv æ ¸å¿ƒç±» NamesrvStartup public class NamesrvStartup { //... public static NamesrvController main0(String[] args) { try { NamesrvController controller = createNamesrvController(args); //å¯åŠ¨ NamesrvController start(controller); String tip = &amp;#34;The Name Server boot success. serializeType=&amp;#34; + RemotingCommand.getSerializeTypeConfigInThisServer(); log.info(tip); System.out.printf(&amp;#34;%s%n&amp;#34;, tip); return controller; } catch (Throwable e) { e.</description></item><item><title>RocketMQæºç é˜…è¯» é€šä¿¡ç»„ä»¶</title><link>https://pinkhello.cc/posts/25-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/</link><pubDate>Sat, 22 May 2021 16:09:45 +0800</pubDate><guid>https://pinkhello.cc/posts/25-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/</guid><description>RocketMQ æ ¸å¿ƒåŸºçŸ³ å‰é¢å·²ç»ä»‹ç»äº† RocketMQ çš„åŸºæœ¬çš„æ¦‚å¿µå’Œç»„ä»¶ã€‚ä»Šå¤©æˆ‘ä»¬å¼€å¯çœŸæ­£çš„æºç çš„é˜…è¯»è¯—ç¯‡, RocketMQ æ¶ˆæ¯ç³»å„ä¸ªç»„ä»¶ Producerã€Consumerã€Brokerã€NameSrv é€šé€šç¦»ä¸å¼€äº¤äº’ï¼Œé‚£æ˜¯ä½¿ç”¨çš„ä»€ä¹ˆäº¤äº’çš„å‘¢ã€‚ç­”æ¡ˆæ˜¯TCPé•¿é“¾æ¥ã€‚ è€Œ RocketMQ å¼€æºä»£ç å†…éƒ¨ï¼Œå¯¹é€šä¿¡ç›¸å…³çš„è¿›è¡Œäº†ä¸€æ¬¡å°è£…ï¼Œéƒ½åœ¨ rocketmq-remoting æ¨¡å—ä¸‹ï¼Œè¿™ä¸ªæ¨¡å—è¢«å…¶ä»– clientã€brokerã€namesrv åº”ç”¨ã€‚
ç›´æ¥å…ˆè¯´ remoting çš„å®ç°æ˜¯åŸºäº netty åšäº†å°è£…ã€å¯åŠ¨äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œæ”¯æŒä¸‰ç§æ¶ˆæ¯çš„å‘é€æ–¹å¼:
åŒæ­¥å‘é€ å•å‘å‘é€ (ä¸éœ€è¦å…³æ³¨å“åº”) å¼‚æ­¥å‘é€ ä¸‹å›¾ä¸ºå¼‚æ­¥é€šä¿¡æµç¨‹ remoting åŒ…ä¸‹çš„æ ¸å¿ƒæ¥å£ä½“ç³» æ¥å£ RemotingService public interface RemotingService { // å¼€å¯ void start(); // å…³é—­ void shutdown(); // æ³¨å†Œ RPCHook void registerRPCHook(RPCHook rpcHook); } æ¥å£ RemotingServer public interface RemotingServer extends RemotingService { // æ³¨å†Œè¯·æ±‚ç±»å‹çš„å¤„ç†å™¨ ã€common æ¨¡å—çš„ org.</description></item><item><title>RocketMQæºç é˜…è¯» å¼€ç¯‡</title><link>https://pinkhello.cc/posts/24-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E5%BC%80%E7%AF%87/</link><pubDate>Thu, 20 May 2021 10:02:20 +0800</pubDate><guid>https://pinkhello.cc/posts/24-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E5%BC%80%E7%AF%87/</guid><description>RocketMQ æ˜¯ä»€ä¹ˆ? RocketMQ æ˜¯ Alibaba æèµ ç»™ Apache çš„ä¸€æ¬¾åˆ†å¸ƒå¼ã€é˜Ÿåˆ—æ¨¡å‹çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ã€‚
Github https://github.com/apache/rocketmq ä»å®˜ç½‘ä¹Ÿèƒ½çœ‹å‡ºå®ƒçš„ä¸€äº›ç‰¹æ€§:
ä½å»¶è¿Ÿ é«˜å¯ç”¨ ä¸‡äº¿çº§çš„æ¶ˆæ¯æ”¯æŒ &amp;hellip; RocketMQ åŸºæœ¬æ¦‚å¿µ RocketMQ æ˜¯ç”± Producerã€Brokerã€Consumer ä¸‰éƒ¨åˆ†ç»„æˆ, Producer è´Ÿè´£ç”Ÿäº§ Message, Consumer è´Ÿè´£æ¶ˆè´¹ Message, Broker è´Ÿè´£å­˜å‚¨ Messageã€‚ æ¯ä¸ª Broker å¯ä»¥å­˜å‚¨å¤šä¸ª Topic çš„æ¶ˆæ¯, æ¯ä¸ª Topic çš„æ¶ˆæ¯ä¹Ÿå¯ä»¥åˆ†ç‰‡å­˜å‚¨åœ¨ä¸åŒçš„ Broker ä¸Šã€‚ Message Queue ç”¨äºå­˜å‚¨æ¶ˆæ¯çš„ç‰©ç†åœ°å€ï¼Œæ¯ä¸ª Topic çš„æ¶ˆæ¯åœ°å€å­˜å‚¨äºå¯¹æ­Œ Message Queue ä¸­ã€‚ Consumer Group ç”±å¤šä¸ª Consumer å®ä¾‹ç»„æˆã€‚
Producer è´Ÿè´£ç”Ÿäº§æ¶ˆæ¯ï¼ŒåŒæ­¥å‘é€ã€å¼‚æ­¥å‘é€ã€é¡ºåºå‘é€ã€å•å‘å‘é€ã€‚åŒæ­¥å’Œå¼‚æ­¥éœ€è¦ Broker ç¡®è®¤ä¿¡æ¯ï¼Œå•å‘å‘é€ä¸éœ€è¦ã€‚
Consumer è´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬å¼‚æ­¥æ¶ˆè´¹ã€‚ä¸€ä¸ªæ¶ˆè´¹è€…ä¼šä» Broker æ‹‰å–æ¶ˆæ¯ã€‚ï¼ˆæ‹‰å–å¼æ¶ˆè´¹ã€æ¨åŠ¨å¼æ¶ˆè´¹ï¼‰
Broker Server è´Ÿè´£å­˜å‚¨ã€è½¬å‘æ¶ˆæ¯ã€‚ æ¥æ”¶ Producer å‘é€æ¥çš„æ¶ˆæ¯å¹¶å­˜å‚¨ã€åŒæ—¶ä¸º Consumer æ‹‰å–è¯·æ±‚åšå‡†å¤‡ã€‚å½“ç„¶ä¹Ÿå­˜å‚¨è¿™æ¶ˆæ¯ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆæ¶ˆè´¹ç»„ã€æ¶ˆè´¹è¿›åº¦åç§»ã€ä¸»é¢˜ã€é˜Ÿåˆ—æ¶ˆæ¯ç­‰ï¼‰</description></item><item><title>å›æœ›K8S æŒä¹…åŒ–å­˜å‚¨</title><link>https://pinkhello.cc/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</link><pubDate>Tue, 18 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</guid><description>PVã€PVCã€StorageClass è¯´çš„å•¥ï¼Ÿ PV: æŒä¹…åŒ–å­˜å‚¨æ•°æ®å·ï¼Œè¿™ä¸ª API ä¸»è¦å®šä¹‰çš„æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨åœ¨å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªç›®å½•ã€‚ä¸€èˆ¬ç”±è¿ç»´äººå‘˜è¿›è¡Œå®šä¹‰ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ª NFS ç±»å‹çš„ PV
apiVersion: v1 kind: PersistentVolume metadata: name: nfs spec: storageClassName: manual capacity: storage: 1Gi accessModes: - ReadWriteMany nfs: server: 10.244.1.5 path: &amp;#34;/&amp;#34; PVC: POD æ‰€å¸Œæœ›ä½¿ç”¨çš„æŒä¹…åŒ–å­˜å‚¨çš„å±æ€§. æ¯”å¦‚ Volume çš„å­˜å‚¨å¤§å°ã€å¯è¯»å†™æƒé™ç­‰. PVC ä¸€èˆ¬ç”±å¼€å‘äººå‘˜åˆ›å»ºã€æˆ–è€…ç”± PVCæ¨¡æ¿çš„æ–¹å¼æˆä¸ºStatefulSetçš„ä¸€éƒ¨åˆ†ï¼Œç”±StatefulSetæ§åˆ¶å™¨è´Ÿè´£åˆ›å»ºå¸¦ç¼–å·çš„PVC.
# åˆ›å»ºä¸€ä¸ª 1 GB å¤§å°çš„PVC --- apiVersion: v1 kind: PersistentVolumeClaim metadata: name: nfs spec: accessModes: - ReadWriteMany storageClassName: manual resources: requests: storage: 1Gi .</description></item><item><title>å›æœ›K8S å®¹å™¨ç¼–æ’ä¸Kubernetesä½œä¸šç®¡ç†</title><link>https://pinkhello.cc/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/</link><pubDate>Mon, 17 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/</guid><description>Pod pod æ˜¯ Kubernetes é¡¹ç›®çš„æœ€å°çš„ API å¯¹è±¡ï¼ŒåŸå­è°ƒåº¦å•ä½.
å‡è®¾ &amp;ldquo;å®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹&amp;rdquo;ï¼Œå®¹å™¨é•œåƒå°±æ˜¯ exe å®‰è£…åŒ…, kubernetes æ˜¯æ“ä½œç³»ç»Ÿ
Pod æœ€é‡è¦çš„ä¸€ä¸ªäº‹å®æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µã€‚å®ƒå¯¹äº Kubernetes æœ€æ ¸å¿ƒçš„æ„ä¹‰æ˜¯ å®¹å™¨è®¾è®¡æ¨¡å¼ã€‚Kubernetes çœŸæ­£å¤„ç†çš„è¿˜æ˜¯å®¿ä¸»æœºä¸Šæ“ä½œç³»ç»Ÿä¸Šçš„ Linux å®¹å™¨çš„ Namespace å’Œ Cgroupsï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ‰€è°“çš„ Pod è¾¹ç•Œå’Œéš”ç¦»ç¯å¢ƒã€‚
Pod å…¶å®æ˜¯ä¸€ç»„å…±äº«äº†æŸäº›èµ„æºçš„å®¹å™¨ã€‚Pod é‡Œé¢æ‰€æœ‰çš„å®¹å™¨ï¼Œå…±äº«çš„åŒä¸€ä¸ª Network Namespaceï¼Œå¹¶ä¸”å¯ä»¥å£°æ˜å…±äº«åŒä¸€ä¸ª Volume.
Kubernetes é¡¹ç›®å†…éƒ¨ï¼ŒPod å®ç°éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸­é—´å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨å«åš Infra å®¹å™¨ï¼Œåœ¨ Pod ä¸­ï¼ŒInfra å®¹å™¨æ°¸è¿œéƒ½æ˜¯ç¬¬ä¸€ä¸ªè¢«åˆ›å»ºçš„å®¹å™¨ï¼Œè€Œå…¶ä»–ç”¨æˆ·å®šä¹‰çš„å®¹å™¨ï¼Œåˆ™é€šè¿‡ Join Network Namespace çš„æ–¹å¼ï¼Œä¸ Infra å®¹å™¨å…³è”åœ¨ä¸€èµ·ã€‚
sidecar å…¸å‹çš„ä¾‹å­ï¼šWAR åŒ…å’Œ Web æœåŠ¡å™¨ PODåï¼Œå°† WAR åŒ…å’Œ Tomcat åˆ†åˆ«åšæˆé•œåƒï¼Œå¯ä»¥æŠŠä»–ä»¬å®¹å™¨ç»“åˆåœ¨ä¸€èµ·
--- apiVersion: v1 kind: Pod metadata: name: javaweb-2 spec: # å¯åŠ¨ååšäº†ä¸€ä»¶äº‹ æŠŠåº”ç”¨çš„WARåŒ…æ‹·è´åˆ° /appç›®å½•ä¸­ï¼Œåé€€å‡º initContainers: - image: sample-war:v2 name: war command: [&amp;#34;cp&amp;#34;, &amp;#34;/sample.</description></item><item><title>å›æœ›K8S Kubernetesæ‹¼å›¾</title><link>https://pinkhello.cc/posts/19-%E5%9B%9E%E6%9C%9Bk8s-kubernetes%E6%8B%BC%E5%9B%BE/</link><pubDate>Sun, 16 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/19-%E5%9B%9E%E6%9C%9Bk8s-kubernetes%E6%8B%BC%E5%9B%BE/</guid><description>kubernetes å®‰è£… all èŠ‚ç‚¹å®‰è£… Docker å’Œ Kubeadm æ‰€æœ‰èŠ‚ç‚¹ root ç”¨æˆ·ä¸‹æ“ä½œ
&amp;gt; curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - &amp;gt; cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/apt/sources.list.d/kubernetes.list deb http://apt.kubernetes.io/ kubernetes-xenial main EOF &amp;gt; apt-get update # è¿™ä¸€æ­¥å®‰è£…çš„æ—¶å€™ kubeadm å’Œ kubeletã€kubectlã€kubernetes-cni éƒ½ä¼šè‡ªåŠ¨å®‰è£…å®Œæ¯• &amp;gt; apt-get install -y docker.io kubeadm æç¤ºï¼šå¦‚æœ apt.kubernetes.io å› ä¸ºç½‘ç»œé—®é¢˜è®¿é—®ä¸åˆ°ï¼Œå¯ä»¥æ¢æˆä¸­ç§‘å¤§çš„ Ubuntu é•œåƒæº deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial mainã€‚
éƒ¨ç½² Kubernetes Master å£°æ˜ä¸€ä¸ª kubeadm.yaml
--- apiVersion: kubeadm.k8s.io/v1alpha1 kind: MasterConfiguration controllerManagerExtraArgs: # é…ç½®äº†è‡ªå®šä¹‰è‡ªåŠ¨æ°´å¹³æ‰©å±• horizontal-pod-autoscaler-use-rest-clients: &amp;#34;true&amp;#34; horizontal-pod-autoscaler-sync-period: &amp;#34;10s&amp;#34; node-monitor-grace-period: &amp;#34;10s&amp;#34; apiServerExtraArgs: runtime-config: &amp;#34;api/all=true&amp;#34; # kubeadm éƒ¨ç½²çš„ kubernetes çš„ç‰ˆæœ¬ kubernetesVersion: &amp;#34;stable-1.</description></item><item><title>å›æœ›K8S ç™½è¯å®¹å™¨</title><link>https://pinkhello.cc/posts/18-%E5%9B%9E%E6%9C%9Bk8s-%E7%99%BD%E8%AF%9D%E5%AE%B9%E5%99%A8/</link><pubDate>Sat, 15 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/18-%E5%9B%9E%E6%9C%9Bk8s-%E7%99%BD%E8%AF%9D%E5%AE%B9%E5%99%A8/</guid><description>è¿›ç¨‹å¼€å¯ å®¹å™¨, åˆ°åº•æ˜¯ä»€ä¹ˆ? å‰é¢æå‡º: å®¹å™¨æ˜¯ä¸€ç§æ²™ç›’æŠ€æœ¯. å°±æ˜¯ä¸€ä¸ªé›†è£…ç®±, æŠŠåº”ç”¨è£…èµ·æ¥çš„æŠ€æœ¯. è¿™æ ·, åº”ç”¨ä¸åº”ç”¨ä¹‹é—´æœ‰äº†è¾¹ç•Œä¸è‡³äºäº’ç›¸å¹²æ‰°; æœ‰äº†è¿™äº›é›†è£…ç®±, ä¹Ÿæ–¹ä¾¿æ¬æ¥æ¬å».
ç å†œéƒ½çŸ¥é“å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä»£ç çš„å¯æ‰§è¡Œé•œåƒ(executable image). ä¸€æ—¦ç¨‹åºæ‰§è¡Œèµ·æ¥, å†…å­˜æ•°æ®ã€å¯„å­˜å™¨çš„å€¼ã€å †æ ˆçš„æŒ‡ä»¤ã€æ‰“å¼€çš„æ–‡ä»¶ç­‰è¿™äº›é›†åˆæ±‡é›†æˆä¸€ä¸ªç¨‹åºçš„è®¡ç®—æœºæ‰§è¡Œç¯å¢ƒæ€»å’Œ: è¿›ç¨‹.
è¿›ç¨‹: é™æ€è¡¨ç°æ˜¯ç¨‹åº, åŠ¨æ€è¡¨ç°è®¡ç®—æœºçš„æ•°æ®å’ŒçŠ¶æ€çš„æ€»å’Œã€‚
å®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½, å°±æ˜¯é€šè¿‡çº¦æŸå’Œä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€è¡¨ç°, ä»è€Œä¸ºå…¶åˆ›é€ ä¸€ä¸ª&amp;quot;è¾¹ç•Œ&amp;quot;.
Cgroups æŠ€æœ¯ åˆ¶é€ çº¦æŸçš„ä¸»è¦æ‰‹æ®µ Namespace æŠ€æœ¯ ä¿®æ”¹è¿›ç¨‹è§†å›¾çš„ä¸»è¦æ–¹æ³• docker run , -it å‘Šè¯‰ Docker å¯åŠ¨å®¹å™¨å, éœ€è¦åˆ†é…ä¸€ä¸ªæ–‡æœ¬è¾“å…¥/è¾“å‡ºç¯å¢ƒ, ä¹Ÿå°±æ˜¯ TTY, è·Ÿå®¹å™¨çš„æ ‡å‡†è¾“å…¥ç›¸å…³è”, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å’Œè¿™ä¸ªDockerå®¹å™¨è¿›è¡Œäº¤äº’äº†ã€‚è€Œ /bin/sh å°±æ˜¯æˆ‘ä»¬åœ¨ Docker å®¹å™¨é‡Œè¿è¡Œçš„ç¨‹åº.
&amp;gt; docker run -it busybox /bin/sh / # å¸®æˆ‘å¯åŠ¨ä¸€ä¸ªå®¹å™¨, åœ¨å®¹å™¨é‡Œæ‰§è¡Œ /bin/sh, å¹¶ä¸”ç»™æˆ‘åˆ†é…ä¸€ä¸ªå‘½ä»¤è¡Œç»ˆç«¯è·Ÿè¿™ä¸ªå®¹å™¨è¿›è¡Œäº¤äº’, åœ¨è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸‹å¯ä»¥å®Œå…¨æ‰§è¡ŒLINUXå‘½ä»¤,ä¸”ä¸å®¿ä¸»æœºå®Œå…¨éš”ç¦»åœ¨ä¸åŒçš„ä¸–ç•Œä¸­.
Dockerå¯¹è¢«éš”ç¦»åº”ç”¨çš„è¿›ç¨‹ç©ºé—´åšäº†æ‰‹è„š, ä½¿å¾—è¿™äº›è¿›ç¨‹åªèƒ½çœ‹åˆ°é‡æ–°è®¡ç®—çš„è¿›ç¨‹ç¼–å·, å¯æ˜¯å®é™…ä¸Š, ä»–ä»¬åœ¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿé‡Œ, è¿˜æ˜¯åŸæ¥çš„ç¬¬Nå·è¿›ç¨‹. è¿™ç§æŠ€æœ¯å°±æ˜¯Linuxå†…éƒ¨çš„Namespaceæœºåˆ¶ã€‚
Namespace çš„ä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸æœ‰æ„æ€ï¼šå®ƒå…¶å®åªæ˜¯ Linux åˆ›å»ºæ–°è¿›ç¨‹çš„ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­åˆ›å»ºçº¿ç¨‹çš„ç³»ç»Ÿè°ƒç”¨æ˜¯ clone()ï¼Œæ¯”å¦‚ï¼š</description></item><item><title>å›æœ›K8S å°é²¸é±¼å®¹å™¨æŠ€æœ¯</title><link>https://pinkhello.cc/posts/17-%E5%9B%9E%E6%9C%9Bk8s-%E5%B0%8F%E9%B2%B8%E9%B1%BC%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/</link><pubDate>Fri, 14 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/17-%E5%9B%9E%E6%9C%9Bk8s-%E5%B0%8F%E9%B2%B8%E9%B1%BC%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/</guid><description>ä»€ä¹ˆæ˜¯å®¹å™¨ åœ¨å®¹å™¨ä¹‹å‰, ç«çˆ†äº‘è®¡ç®—å¸‚åœºçš„æ˜¯ PAAS, PAASå·²ç»æ·±å…¥äººå¿ƒ. é‚£æ—¶å€™çªç„¶æœ‰ä¸€å®¶å…¬å¸ dotCloud å‰‘èµ°åé”‹, ç›´æ¥å¼€æºå‡ºäº† Docker é¡¹ç›®ï¼Œå¹¶ä¸”ç›´æ¥é¢å‘çš„ç¤¾åŒºã€‚ è¿™æ ·çš„åšæ³•ç›´æ¥å°†å½“æ—¶çš„PAASæµä¸»è¦å…¬å¸æ‰“çš„å±æ»šå°¿æµã€‚
å›å¤´çœ‹, PAAS æœ€æ ¸å¿ƒçš„æ˜¯éš”ç¦»ç¯å¢ƒ,æˆ–è€…å« æ²™ç›’,åœ¨æˆ‘çœ‹æ¥ä¹Ÿå°±æ˜¯ å®¹å™¨. è€Œ Docker é¡¹ç›®å’Œ Cloud Foundry çš„å®¹å™¨æ²¡æœ‰å¤ªå¤§çš„ä¸åŒ,ä½†æ˜¯å®ƒä¸ºä»€ä¹ˆèƒ½é’ˆå¯¹ PAASè¿›è¡Œäº†ä¸€åœºå¿«é€Ÿçš„é—ªç”µæˆ˜å‘¢ï¼Ÿ
å¯¹çš„, å°±æ˜¯ Docker é•œåƒ, è¿™ä¸ªå°å°çš„åˆ›æ–°, è¿…é€Ÿæ”¹å˜äº†äº‘è®¡ç®—çš„å‘å±•è½¨è¿¹! Docker é•œåƒè§£å†³çš„æ˜¯ æ‰“åŒ… é—®é¢˜ã€‚ä¹Ÿè®¸æœ‰äººè¯´Docker é•œåƒå°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ã€‚ä½†æ˜¯å°±æ˜¯è¿™ä¸ªå‹ç¼©åŒ…åŒ…å«äº†å®Œæ•´çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•, åŒ…å«äº†æ•´ä¸ªåº”ç”¨æ‰€éœ€è¦çš„ä¾èµ–ï¼Œä¸€åŒ…åœ¨æ‰‹, ä½ å¯ä»¥è½»æ˜“çš„è¿è¡Œä½ çš„æ²™ç›’,å¹¶ä¸”æœ¬åœ°ç¯å¢ƒä¸äº‘ç«¯ç¯å¢ƒé«˜åº¦ä¸€è‡´ï¼ˆè¿™æ˜¯æœ€å®è´µçš„ï¼‰ã€‚
Dockerç»™PAASè¿›è¡Œäº†è‡´å‘½æ‰“å‡», æä¾›äº†ä¾¿åˆ©çš„æ‰“åŒ…æœºåˆ¶, é¢å‘åç«¯å¼€å‘è€…æ¥è¯´, å±è”½äº†æœºå™¨ã€å†…æ ¸ç­‰æŠ€æœ¯ç»†èŠ‚, é¿å…äº†åœ¨ä¸åŒç¯å¢ƒé—´çš„å·®å¼‚å¼•å…¥çš„è¯•é”™æˆæœ¬ã€‚æ˜¯ä¸€æ¬¡è§£æ”¾ç”Ÿäº§åŠ›çš„é©å‘½ã€‚å½“ç„¶å¾ˆå¤šå¼€å‘è€…ç”¨è„šæŠ•ç¥¨, äº†ç»“äº†PAASæ—¶ä»£ã€‚
Docker ä¸‰å¤§åˆ©å™¨ Dockeré¡¹ç›®çš„é«˜è°ƒå¼€æº, è§£å†³äº†æ‰“åŒ…å’Œå‘å¸ƒå›°æ‰°è¿ç»´çš„æŠ€æœ¯éš¾é¢˜ï¼ŒåŒæ—¶å®ƒä¹Ÿç¬¬ä¸€æ¬¡çº¯åç«¯çš„æ¦‚å¿µé€šè¿‡å‹å¥½çš„è®¾è®¡å’Œå°è£…äº¤ä»˜åˆ°äº†å¼€å‘è€…çš„æ‰‹é‡Œã€‚ Swarm,Dockeræ˜¯åˆ›å»ºå’Œå¯åœå®¹å™¨çš„å·¥å…·,é‚£ä¹ˆSwarmæ˜¯ä¸ºäº†å‘å¹³å°åŒ–å‘å±•è€Œæå‡ºçš„ã€‚å®ƒæä¾›äº†å®Œæ•´çš„æ•´ä½“å¯¹å¤–æä¾›é›†ç¾¤ç®¡ç†åŠŸèƒ½,å®ƒçš„äº®ç‚¹æ˜¯å®Œå…¨ä½¿ç”¨DockeråŸæœ¬çš„ç®¡ç†å®¹å™¨çš„APIæ¥å®Œæˆé›†ç¾¤ç®¡ç† # Swarmå¤šæœºç¯å¢ƒä¸‹ï¼ŒæŒ‡ä»¤ä¼šè¢«Swarmæ‹¦æˆªå¤„ç†ï¼Œåé¢é€šè¿‡è°ƒåº¦ç®—æ³•æ‰¾åˆ°åˆé€‚çš„Docker Daemonè¿è¡Œ docker run -H &amp;#34;Swarmé›†ç¾¤API&amp;#34; &amp;#34;æˆ‘çš„å®¹å™¨&amp;#34; Compose(Fig)é¡¹ç›®, è¿™æ˜¯ç¬¬ä¸€æ¬¡åœ¨å¼€å‘è€…é¢å‰æå‡º å®¹å™¨ç¼–æ’(Container Orchestration)æ¦‚å¿µã€‚ åº”ç”¨å®¹å™¨ A, æ•°æ®åº“å®¹å™¨B, è´Ÿè½½å‡è¡¡å®¹å™¨C, Compose å…è®¸ Aã€Bã€C ä¸‰ä¸ªå®¹å™¨å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­, å¹¶æŒ‡å®šå…³è”å…³ç³».</description></item><item><title>Hexoè¿ç§»Hugo</title><link>https://pinkhello.cc/posts/16-hexo%E8%BF%81%E7%A7%BBhugo/</link><pubDate>Tue, 11 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/16-hexo%E8%BF%81%E7%A7%BBhugo/</guid><description>ä¸ºä»€ä¹ˆè¿ç§» Hugo Hugo ä½¿ç”¨æ¯” Hexo ç®€å•, åªæœ‰å•ç‹¬çš„ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ è‹¦äº Hexo çš„ NodeModule ç®¡ç† è¿ç§»æˆæœ¬æ›´ä½, ç»“åˆ Github Action å®ç° Markdown æ–‡ç« å‘å¸ƒ, è‡ªåŠ¨æ›´æ–°è‡³é™æ€ç«™ è§„åˆ’ï¼šåŠ å…¥è‡ªå®šä¹‰åŸŸåä»¥åŠåšé™æ€èµ„æºCDNåšçš„åŠ é€Ÿ å‰ç½®å·¥ä½œ 1ã€ ä¹‹å‰åŸºæœ¬æ‰€æœ‰çš„åšå®¢éƒ½æ‰˜ç®¡ä¸ github,è¿™æ¬¡ä¹Ÿä¸ä¾‹å¤–, å¤ç”¨ https://pinkhello.github.io,åˆ›å»ºä¸¤ä¸ªé¡¹ç›®
pinkhello.github.io template ä»“åº“ pinkhello.github.io.source private ä»“åº“ 2ã€å‡†å¤‡OpenSSHç§é’¥å’Œå…¬é’¥
pinkhello.github.io ä»“åº“ æ·»åŠ  settings -&amp;gt; Deploy keys -&amp;gt; Add Deploy Key (å°†å…¬é’¥æ·»åŠ è¿›å»ã€æ³¨æ„å…è®¸ Write) pinkhello.github.io.source ä»“åº“ æ·»åŠ  settings -&amp;gt; Actions secrets -&amp;gt; New Repository Secret ( NAME : ACTION_DEPLOY_KEY, Value: ç§é’¥ ) 3ã€git clone pinkhello.</description></item><item><title>Kafkaä¸Debeziumæ„å»ºCDCç®¡é“</title><link>https://pinkhello.cc/posts/13-kafka%E4%B8%8Edebezium%E6%9E%84%E5%BB%BAcdc%E7%AE%A1%E9%81%93/</link><pubDate>Tue, 04 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/13-kafka%E4%B8%8Edebezium%E6%9E%84%E5%BB%BAcdc%E7%AE%A1%E9%81%93/</guid><description>å»ºè®¾ç¯‡ 1ã€ä»€ä¹ˆæ˜¯ debezium? https://debezium.io/
Tutorial https://debezium.io/documentation/reference/1.3/tutorial.html
2ã€Debezium å¦‚ä½•å·¥ä½œçš„ 2.1 Debezium æ”¯æŒçš„æ•°æ®åº“ç±»å‹ MySQL MongoDB PostgreSQL Oracle SQL Server Db2 Cassandra 2.2 Debezium ä¸‰ç§æ–¹å¼è¿è¡Œ Kafka Connect Debezium Server Embedded Engine https://github.com/debezium/debezium-examples/tree/master/kinesis
3ã€åœ¨ K8S ä¸­æ„å»ºåŸºç¡€Debeziumé›†ç¾¤ç¯å¢ƒ é•œåƒå‡†å¤‡
kafka | debezium https://hub.docker.com/r/debezium/kafka zookeeper | debezium https://hub.docker.com/r/debezium/zookeeper connect | debezium https://hub.docker.com/r/debezium/connect schema-registry | confluentinc https://hub.docker.com/r/confluentinc/cp-schema-registry psï¼š debezium å‚è€ƒåœ°å€ https://github.com/debezium/docker-images confluentinc å‚è€ƒåœ°å€ https://github.com/confluentinc/cp-all-in-one/tree/latest/cp-all-in-one
3.1 K8SåŸºç¡€çŸ¥è¯† kafka ä¸ zookeeper å»ºè®¾ä¸º stateful çŠ¶æ€é›†ç¾¤ schema-registry ä¸»è¦ä¸ºäº† æ”¯æŒ avro æ ¼å¼è¿™äº›ä¸éœ€è¦å†™åˆ° kafka æ¶ˆæ¯å¤´é‡Œé¢ï¼Œå‡å°‘æ¶ˆæ¯çš„å¤§å°ï¼Œé¢å¤–çš„æœåŠ¡ï¼Œå±äº kafka ç”Ÿæ€ï¼Œå­˜å‚¨ä¾èµ– kafka brokerä¿è¯ç¨³å®šæ€§ã€‚ k8s steteful é›†ç¾¤ 0&amp;hellip;~ n ä¸ª POD zookeeper é‡Œé¢ zoo.</description></item><item><title>å‡ ä¸ªå…³äºkafkaçš„çŸ¥è¯†ç‚¹</title><link>https://pinkhello.cc/posts/11-%E5%87%A0%E4%B8%AA%E5%85%B3%E4%BA%8Ekafka%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/</link><pubDate>Sun, 02 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/11-%E5%87%A0%E4%B8%AA%E5%85%B3%E4%BA%8Ekafka%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/</guid><description>è®¤è¯†kafka Kafka æ˜¯åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œ Apache çš„å­é¡¹ç›®ã€‚æ ‡è¯­ä¹Ÿå˜äº†&amp;quot;åˆ†å¸ƒå¼æµå¹³å°&amp;quot;ï¼Œ ä¸ä¼ ç»Ÿçš„æ¶ˆæ¯ç³»ç»Ÿä¸åŒç‚¹åœ¨äº
åˆ†å¸ƒå¼çš„ï¼Œæ˜“äºæ‰©å±• ä¸ºå‘å¸ƒå’Œè®¢é˜…æä¾›äº†é«˜åå æ”¯æŒå¤šè®¢é˜…è€…ï¼Œåœ¨å¤±è´¥çš„æ—¶å€™èƒ½è‡ªåŠ¨å¹³è¡¡æ¶ˆè´¹è€… æ¶ˆæ¯çš„æŒä¹…åŒ– kafka çš„æ¶æ„ å‡ ç‚¹ï¼Ÿ
Kafka çš„ Topic å’Œ Partition å†…éƒ¨å¦‚ä½•å­˜å‚¨ï¼Ÿ ä¸ä¼ ç»Ÿçš„æ¶ˆæ¯ç³»ç»Ÿç›¸æ¯”ï¼Œ Kafka æ¶ˆè´¹æ¨¡å‹æœ‰å•¥ä¼˜ç‚¹ï¼Ÿ Kafka æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨å’Œæ•°æ®çš„è¯»å–ï¼Ÿ Kafka æ¶æ„ ä¸€ä¸ª Kafka é›†ç¾¤ï¼Œå¤šä¸ª Producer ï¼Œå¤šä¸ª Consumer ï¼Œå¤šä¸ª Broker ï¼Œ é€‰ä¸¾ Leader ä»¥åŠåœ¨ Consumer Group å‘ç”Ÿå˜åŒ–æ—¶è¿›è¡Œ reblance ã€‚
Broker æ¶ˆæ¯ä¸­é—´ä»¶çš„å¤„ç†èŠ‚ç‚¹ï¼Œä¸€ä¸ª Kafka èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ª Broker ï¼Œ ä¸€ä¸ªæˆ–è€…å¤šä¸ª Broker ç»„æˆ Kafka é›†ç¾¤ Topic Kafka æ ¹æ® Topic å¯¹ Message è¿›è¡Œå½’ç±»ï¼Œå‘å¸ƒåˆ° Kafka çš„æ¯æ¡ Message éƒ½è¦æŒ‡å®š Topic Producer å‘ Broker å‘ç”Ÿ message Consumer ä» Broker è¯»å– message Consumer Group æ¯ä¸ª Consumer å±äºç‰¹å®šçš„ Groupï¼Œä¸€ä¸ª Message å¯ä»¥å‘é€ç»™ä¸åŒçš„ Consumer Group ï¼Œä½†æ˜¯åŒä¸€ä¸ª Group ä¸‹çš„åªæœ‰ä¸€ä¸ª Consumer èƒ½æ¶ˆè´¹è¯¥ Message Partition ç‰©ç†æ¦‚å¿µï¼Œä¸€ä¸ª Topic ä¸‹å¯ä»¥åˆ†ä¸ºå¤šä¸ª Partition, æ¯ä¸ª Partition ä¸‹æ˜¯æœ‰åºçš„ã€‚ ä¸‹é¢æ¥è®²è¿° ä¸Šé¢ä¸ºé—®é¢˜å•Š</description></item><item><title>å¤šåŸŸåä¸‹çš„SSH</title><link>https://pinkhello.cc/posts/10-%E5%A4%9A%E5%9F%9F%E5%90%8D%E4%B8%8B%E7%9A%84ssh/</link><pubDate>Fri, 02 Apr 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/10-%E5%A4%9A%E5%9F%9F%E5%90%8D%E4%B8%8B%E7%9A%84ssh/</guid><description>å‰è¨€ æœ‰æ—¶å€™æˆ‘ä»¬ï¼Œæœ‰å¤šä¸ª git è´¦å·ï¼ˆGitlabã€GitHubï¼‰ï¼Œè¿™æ—¶å€™å¦‚æœæ˜¯åŒä¸€ä¸ªè´¦å·ï¼ˆé‚®ç®±æ³¨å†Œï¼‰ï¼Œé‚£ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯ç›¸åŒçš„è´¦å·å‘¢ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ SSH KEY åšå…å¯†ç™»å½•æ—¶å€™ï¼Œå¤´ç—›äº†ã€‚
è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦é’ˆå¯¹ä¸åŒçš„è´¦å·ï¼Œç”Ÿæˆä¸åŒçš„ SSH Keyï¼Œå¹¶ä¸”é…ç½®ä¸åŒçš„åŸŸåä½¿ç”¨ä¸åŒçš„Key
ç”Ÿæˆä¸€ä¸ª SSH KEY ssh-keygen -t rsa -C &amp;#34;username@email.com&amp;#34; ä¸€è·¯ Enterï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆæ—¶å€™æŒ‡å®šåå­—ï¼Œï¼ˆä¸æŒ‡å®šåå­—ä¼šä½¿ç”¨é»˜è®¤çš„ï¼‰å¾—åˆ°
id_rsa # ç§é’¥ id_rsa.pub # å…¬é’¥ é‡å¤ä¸Šä¸€ä¸ªæ­¥éª¤ï¼Œç”Ÿæˆå¤šä¸ª ç§é’¥å’Œå…¬é’¥ github_id_rsa github_id_rsa.pub gitlab_id_rsa gitlab_id_rsa.pub é…ç½®ç›¸åº”çš„åŸŸåå¯¹åº”çš„ SSH-KEY æœ¬åœ°ç›®å½• ~/.ssh/ ä¸‹ï¼ŒæŸ¥é˜…æœ‰æ²¡æœ‰ config æ–‡ä»¶, ä¸å­˜åœ¨å°±æ–°å»º config æ–‡ä»¶ Host github HostName github.com User UserName PreferredAuthentications publickey IdentityFile ~/.ssh/github_id_rsa Host gitlab HostName gitlab.com User UserName PreferredAuthentications publickey IdentityFile ~/.ssh/gitlab_id_rsa å°†å¯†é’¥æ·»åŠ è¿›å…¥ SSH-AGENT ä¸­ ssh-add ~/.</description></item><item><title>ä½¿ç”¨githookç»Ÿä¸€codestyle</title><link>https://pinkhello.cc/posts/09-%E4%BD%BF%E7%94%A8githook%E7%BB%9F%E4%B8%80codestyle/</link><pubDate>Tue, 30 Mar 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/09-%E4%BD%BF%E7%94%A8githook%E7%BB%9F%E4%B8%80codestyle/</guid><description>gradle ä¼˜åŒ– build æŒ‡å®š -g cache ç¼“å­˜ checkstyle å®è·µ åŸºç¡€é•œåƒåŒ…å« checkstyle.xml æˆ–è€… æ”¾åˆ°è¿œç¨‹å…¶ä»–å¯è¢«æ‹‰å–åˆ°çš„å­˜å‚¨ä»‹è´¨ ï¼Œé˜²æ­¢é¡¹ç›®æˆå‘˜æ”¹åŠ¨ gitlab-ci beforeScript æ ‡ç­¾æ‰§è¡Œå‘½ä»¤ copy /checkstyle.xml è¿›å…¥é¡¹ç›®ï¼Œ(è¦†ç›–é¡¹ç›®ä¸­å­˜åœ¨çš„). gradle ç¼–è¯‘çš„è¯ å°† maven-publish.gradle repos.gradle checkstyle.gradle(checkstyle æ’ä»¶é…ç½® ç‰ˆæœ¬ä»¥åŠ configFile) æŠ½å‡ºæ”¾åˆ°å…¬å…±çš„åœ°æ–¹ï¼Œé˜²æ­¢é¡¹ç›®å›¢é˜Ÿæˆå‘˜æ”¹çš„. maven çš„è¯ï¼Œå¯ä»¥åœ¨å…¬å…±çš„é¡¶çº§ç»§æ‰¿ pom é‡Œé¢æŒ‡å®šå˜é‡checkstyle.config.location. mvn checkstyle -Dcheckstyle.config.location=checkstyle.xml git hook å®è·µ æ¯ä¸ªé¡¹ç›®é‡Œé¢ .git/hooks é‡Œé¢æœ‰å¾ˆå¤šçš„ hook æ¨¡æ¿
å®¢æˆ·ç«¯é’©å­åŒ…æ‹¬:pre-commitã€prepare-commit-msgã€commit-msgã€post-commitç­‰ï¼Œä¸»è¦ç”¨äºæ§åˆ¶å®¢æˆ·ç«¯gitçš„æäº¤å·¥ä½œæµã€‚
æœåŠ¡ç«¯é’©å­ï¼špre-receiveã€post-receiveã€updateï¼Œä¸»è¦åœ¨æœåŠ¡ç«¯æ¥æ”¶æäº¤å¯¹è±¡æ—¶ã€æ¨é€åˆ°æœåŠ¡å™¨ä¹‹å‰è°ƒç”¨ã€‚
ä»Šå¤©å®è·µçš„æ˜¯ å®¢æˆ·ç«¯é’©å­ï¼Œä¼˜åŒ–å‡å°‘ä¸ç¬¦åˆè§„èŒƒæˆ–è€…ä½è´¨é‡ä»£ç è¿›å…¥ gitflow æµç¨‹.
pre-commit å’Œ commit-msg æ˜¯ä»Šå¤©çš„ä¸»è§’ï¼Œpre-commit æ‰§è¡Œä¸ git add ä¹‹åï¼Œåœ¨è¿›è¡Œ git commit ä¹‹å‰è¿›è¡Œçš„æ“ä½œ. å¯ä»¥ç”¨æ¥è¿›è¡Œ code check code lint ç­‰ç­‰, commit-msg æ‰§è¡Œä¸ git commit å¸¸ç”¨äºè¡¥å…¨ git commit message check msg ç­‰ç­‰ å½“ç„¶è¿˜æœ‰å…¶ä»–éªšæ“ä½œçš„åŠŸèƒ½ï¼Œå¯ä»¥é€šçŸ¥ï¼Œç­‰ç­‰ï¼Œåšå¤šç§è‡ªåŠ¨åŒ–</description></item><item><title>Gradleå¤šæ¨¡å—é¡¹ç›®æ¨¡æ¿åŒ–</title><link>https://pinkhello.cc/posts/08-gradle%E5%A4%9A%E6%A8%A1%E5%9D%97%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E5%8C%96/</link><pubDate>Mon, 29 Mar 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/08-gradle%E5%A4%9A%E6%A8%A1%E5%9D%97%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E5%8C%96/</guid><description>å‰è¨€ Maven å†—ä½™ï¼Œ Gradle ç®€å•è½»ä¾¿ å…¬å¸åŸæœ‰çš„ CI/CD æµç¨‹ï¼Œå€ŸåŠ© Maven æ’ä»¶ build Docker Image,æ”¹ä¸ºåŸç”Ÿ Docker Runner åŸå§‹æ„å»º
1ã€å¤šæ¨¡å—é¡¹ç›® project - app - src/main/[java|resources] | src/test/[java|resources] # classpath - Dockerfile # Dockerfile - build.gradle # APP æ¨¡å— gradle é…ç½® - sdk # SDK æ¨¡å— å¯æœ‰å¯æ—  - src/main/java - build.gradle # SDK çš„ gradle é…ç½® - deploy # delpoy é¡¹ç›® æ³¨æ„ checkstyle ç›¸å…³é…ç½®åœ¨è¿™é‡Œé¢ - checkstyle/** - **.</description></item><item><title>Fabricä½¿ç”¨</title><link>https://pinkhello.cc/posts/07-fabric%E4%BD%BF%E7%94%A8/</link><pubDate>Sun, 28 Mar 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/07-fabric%E4%BD%BF%E7%94%A8/</guid><description>docker åŠ å…¥systemctlç¯å¢ƒå¹¶å¯åŠ¨docker å¿«é€Ÿå®‰è£…docker
curl -sSL https://get.daocloud.io/docker | sh systemctl enable docker systemctl start docker docker-compose å®‰è£… èµ°å¤–ç½‘æˆ–è€… github å¤ªæ…¢,å¯ä»¥ä½¿ç”¨å†…éƒ¨åŠ é€Ÿ
curl -L &amp;#34;https://github.com/docker/compose/releases/download/X.XX.X/docker-compose-$(uname -s)-$(uname -m)&amp;#34; -o /usr/local/bin/docker-compose curl -L https://get.daocloud.io/docker/compose/releases/download/1.26.2/docker-compose-`uname -s`-`uname -m` &amp;gt; /usr/local/bin/docker-compose fabric è‡ªåŠ¨è¿ç»´ python è™šæ‹Ÿç¯å¢ƒå®‰è£… å‚è€ƒ
åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ
cd ç›®æ ‡ç›®å½• virtualenv --no-site-packages venv æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate python pip å®‰è£… Fabric pip install fabric3 python pip å¯¼å‡ºä¾èµ– pip freeze &amp;gt; requirements.txt å…¶ä»–python pip å¯¼å…¥å®‰è£… pip install -r requirements.txt Fabric æ–‡æ¡£ fabfiles æ–‡æ¡£ # encoding=utf-8 from fabric.</description></item><item><title>é«˜æ€§èƒ½é˜Ÿåˆ—Disruptor</title><link>https://pinkhello.cc/posts/06-%E9%AB%98%E6%80%A7%E8%83%BD%E9%98%9F%E5%88%97disruptor/</link><pubDate>Mon, 15 Mar 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/06-%E9%AB%98%E6%80%A7%E8%83%BD%E9%98%9F%E5%88%97disruptor/</guid><description>èƒŒæ™¯ Disruptor æ˜¯ å¤–æ±‡äº¤æ˜“å…¬å¸LMAXå¼€å‘çš„é«˜æ€§èƒ½é˜Ÿåˆ—ã€ç ”å‘æ˜¯ä¸ºäº†è§£å†³å†…å­˜é˜Ÿåˆ—å»¶è¿Ÿé—®é¢˜ã€‚ Disruptor ä¸€èˆ¬ç”¨äºçº¿ç¨‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚ Disruptor GitHub åœ°å€
Disruptor ä»‹ç» ç†è§£ Disruptor æœ€å¥½çš„æ–¹å¼ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€æ¥è¿‘ç†Ÿæ‚‰çš„æ ·æœ¬è¿›è¡Œæ¯”è¾ƒã€‚åœ¨è¿™ä¸ªå‰æä¸‹ï¼Œå¯ä»¥é€‰æ‹© Java ä¸­çš„ BlockingQueue. å’Œé˜Ÿåˆ—ç›¸ä¼¼ï¼ŒDisruptor ä¹Ÿæ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ä¸åŒçš„çº¿ç¨‹ä¹‹é—´è¿›è¡Œä¼ é€’æ•°æ®çš„ï¼ˆä¾‹å¦‚æ¶ˆæ¯æˆ–è€…äº‹ä»¶ï¼‰ï¼ŒåŒæ—¶ Disruptor æä¾›äº†ä¸€äº›å°†å…³é”®åŠŸèƒ½å’Œé˜Ÿåˆ—åˆ†å¼€çš„ç‰¹æ€§ï¼š
å‘æ¶ˆè´¹è€…å‘é€å¤šæ’­äº‹ä»¶ æ¶ˆæ¯è€…ä¾èµ–å…³ç³»å›¾ é¢„å…ˆä¸ºäº‹ä»¶åˆ†é…å†…å­˜ å¯é€‰çš„ï¼ˆæ— é”ï¼‰ Disruptor æ ¸å¿ƒæ¦‚å¿µ åœ¨æˆ‘ä»¬ç†è§£Disruptorå¦‚ä½•å·¥ä½œä¹‹å‰ï¼Œäº†è§£ä¸‹æ ¸å¿ƒæ¦‚å¿µ
Ring Buffer ç¯å½¢æ•°ç»„è®¾è®¡ï¼Œä¸ºäº†é¿å…åƒåœ¾å›æ”¶ï¼Œé‡‡ç”¨çš„æ•°ç»„ç»“æ„ï¼Œä»3.0å¼€å§‹ï¼Œç¯å½¢ç¼“å†²åŒºä¸»è¦å­˜å‚¨å’Œæ›´æ–°åœ¨Disruptorä¸­ç§»åŠ¨çš„æ•°æ®ï¼ˆäº‹ä»¶ï¼‰ Sequence Disruptor æ¯ä¸ªæ¶ˆè´¹è€…(EventProcessor)ç»´æŠ¤ä¸€ä¸ª Sequenceï¼Œå¹¶å‘çš„å¤§å¤šæ•°ä»£ç éƒ½ä¾èµ– Sequence å€¼çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥ Sequence æ”¯æŒ AtomicLong çš„å¤§éƒ¨åˆ†ä¹Ÿè¡Œ, å”¯ä¸€ä¸åŒçš„æ˜¯ Sequence åŒ…å«é¢å¤–çš„åŠŸèƒ½æ¥é˜»æ­¢Sequenceå’Œå…¶ä»–å€¼ä¹‹é—´çš„ä¼ªå…±äº«(false sharing) Sequencer
Disruptor æ ¸å¿ƒé€»è¾‘, ä¸¤ä¸ªå®ç°: å•ç”Ÿäº§è€…å’Œå¤šç”Ÿäº§è€…ã€‚ä»–ä»¬å®ç°äº†ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¹‹é—´çš„å¿«é€Ÿä¼ é€’çš„å¹¶å‘ç®—æ³•ã€‚ Sequence Barrier ç”± Sequencer ç”Ÿæˆï¼ŒåŒ…å«æ­¤ Sequencer å‘å¸ƒçš„ Sequence æŒ‡é’ˆä»¥åŠä¾èµ–çš„å…¶ä»–æ¶ˆè´¹è€…çš„ Sequenceã€‚åŒ…å«äº†æ¶ˆè´¹è€…æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„äº‹ä»¶çš„ä»£ç ã€‚ Wait Strategy æ¶ˆè´¹è€…ç­‰å¾…äº‹ä»¶çš„ç­–ç•¥ï¼Œè¿™ä¸ªäº‹ä»¶ç”±ç”Ÿäº§è€…æ”¾å…¥ï¼Œå†³å®šäº†æ¶ˆè´¹è€…æ€ä¹ˆç­‰å¾…ç”Ÿäº§è€…å°†äº‹ä»¶æ”¾å…¥ Disruptor Event ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¼ é€’çš„äº‹ä»¶ï¼Œå®Œå…¨ç”±ç”¨æˆ·å®šä¹‰ EventProcessor å¤„ç†äº‹ä»¶çš„ä¸»è¦å¾ªç¯ï¼ˆmain event loopï¼‰ï¼ŒåŒ…å«äº†ä¸€ä¸ª Sequeuece.</description></item><item><title>OAuth2.0 é‚£ç‚¹äº‹</title><link>https://pinkhello.cc/posts/05-oauth2.0%E9%82%A3%E7%82%B9%E4%BA%8B/</link><pubDate>Wed, 10 Feb 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/05-oauth2.0%E9%82%A3%E7%82%B9%E4%BA%8B/</guid><description>OAuth2.0 æ˜¯ä»€ä¹ˆ? OAuth2.0 Framework RFC 6749 [https://tools.ietf.org/html/rfc6749]
OAuth å°±æ˜¯ä¸€ç§æˆæƒæœºåˆ¶ï¼Œå®ƒä»‹äºå®¢æˆ·ç«¯ä¸èµ„æºæ‰€æœ‰è€…çš„æˆæƒå±‚ï¼Œä¸ºäº†åˆ†ç¦»ä¸åŒçš„è§’è‰²ã€‚ åœ¨èµ„æºæ‰€æœ‰è€…åŒæ„å¹¶å‘å®¢æˆ·ç«¯é¢å‘ä»¤ç‰Œåï¼Œå®¢æˆ·ç«¯æºå¸¦ä»¤ç‰Œå¯ä»¥è®¿é—®éƒ¨åˆ†æˆ–å…¨éƒ¨èµ„æºã€‚
OAuth2.0æ˜¯OAuthåè®®çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸º2.0ç‰ˆæœ¬ã€‚æœ‰æ„æ€çš„æ˜¯ 2.0ä¸ 1.0å¹¶ä¸å…¼å®¹ã€‚
OAuth2.0 æˆæƒæ–¹å¼ è·å–æˆæƒçš„è¿‡ç¨‹
æˆæƒç (authorization-code) éšè—å¼(implicit) å¯†ç (password) å®¢æˆ·ç«¯å‡­è¯(client credentials) ä¸ç®¡å“ªç§æ–¹å¼ï¼Œéƒ½éœ€è¦åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·ä»¤ç‰Œä¹‹å‰ï¼Œéœ€è¦åœ¨ç³»ç»Ÿä¸­ç”³è¯·èº«ä»½å”¯ä¸€æ ‡è¯†: å®¢æˆ·ç«¯ID Client IDå’Œ å®¢æˆ·ç«¯ç§˜é’¥ Client Secret. è¿™æ ·èƒ½ç¡®ä¿Tokenä¸è¢«æ¶æ„ä½¿ç”¨ã€‚
æˆæƒé‡è¦çš„å‚æ•°å’ŒæŒ‡æ ‡:
response_typeå“åº”ç±»å‹: code(è¦æ±‚è¿”å›æˆæƒç ),token(è¦æ±‚è¿”å›æˆæƒToken) client_idå®¢æˆ·ç«¯èº«ä»½æ ‡è¯† client_secretå®¢æˆ·ç«¯ç§˜é’¥ redirect_urié‡å®šå‘åœ°å€ scopeæˆæƒèŒƒå›´, readåªè¯»æƒé™, allå…¨éƒ¨æƒé™ grant_typeæˆæƒæ–¹å¼ authorization_code(æˆæƒç )ã€password(å¯†ç )ã€client_credentials(å‡­è¯)ã€refresh_token(æ›´æ–°ä»¤ç‰Œ) stateåº”ç”¨ç¨‹åºä¼ é€’çš„ä¸€ä¸ªéšæœºæ•°ï¼Œé˜²æ­¢ CSRFæ”»å‡» æˆæƒç  åœ¨è®¿é—®ç¬¬ä¸‰æ–¹åº”ç”¨å…ˆç”³è¯·ä¸€ä¸ªæˆæƒç ï¼Œç„¶åå†ç”¨æˆæƒç è·å–ä»¤ç‰Œ.è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æµç¨‹ï¼Œå®‰å…¨æ€§ä¹Ÿæ˜¯æœ€é«˜çš„ï¼Œé€‚ç”¨äºæœ‰åç«¯çš„Webåº”ç”¨ã€‚æˆæƒç é€šè¿‡å‰ç«¯ä¼ é€ï¼Œä»¤ç‰Œå­˜å‚¨åœ¨åç«¯ã€‚æ‰€æœ‰çš„å’Œèµ„æºæœåŠ¡å™¨çš„äº¤äº’éƒ½åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œé¿å…äº†ä»¤ç‰Œçš„æ³„éœ²ã€‚ æˆæƒç å’Œä»¤ç‰Œçš„åœ¨ æµè§ˆå™¨å’Œå®¢æˆ·ç«¯WEBåº”ç”¨ä»¥åŠèµ„æºæœåŠ¡å™¨çš„äº¤äº’æµç¨‹å¤§è‡´å¦‚ä¸‹: 1.2.3.4 ç”¨æˆ·é€‰æ‹© Googleç™»é™† yelp.com 3.4 Yelp.comè¯·æ±‚ç”¨æˆ·æˆæƒ Googleæƒé™ 5.6 ç”¨æˆ·åŒæ„åè¿”å›æˆæƒç  7.8 Yelp.comé€šè¿‡æˆæƒç  ä¼šå‘ Googleå‘èµ·è¯·æ±‚Token 9 éªŒè¯å¿…è¦å‚æ•°ï¼Œè¿”å› Token 10.11 æ“ä½œè¯·æ±‚ éšè—å¼ å¯†ç å¼ é¡¾åæ€è®®,åœ¨è‡ªå·±çš„ç³»ç»Ÿè¾“å…¥ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„è´¦å·å¯†ç ,è‡ªå·±çš„ç³»ç»Ÿæ‹¿è´¦å·å¯†ç å»ç”³è¯·ä»¤ç‰Œï¼Œå“åº”é¢˜é‡Œé¢è¿”å›token</description></item><item><title>å¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•çš„RPCè°ƒç”¨</title><link>https://pinkhello.cc/posts/04-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84rpc%E8%B0%83%E7%94%A8/</link><pubDate>Wed, 13 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/04-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84rpc%E8%B0%83%E7%94%A8/</guid><description>1ã€ä»€ä¹ˆå«RPC?
RPCæ„æˆ
RPC Consumer RPC Provider ConfigServer 1ã€Provider å¯åŠ¨ ConfigServer æ³¨å†ŒæœåŠ¡ 2ã€Consumer å¯åŠ¨ ConfigServer è®¢é˜…æœåŠ¡ï¼Œ 3ã€å‘èµ·è°ƒç”¨ Consumer &amp;mdash;&amp;gt; Provider 4ã€å“åº”è°ƒç”¨ Consumer &amp;lt;&amp;mdash; Provider 2ã€ä»€ä¹ˆæ˜¯ Netty ? https://netty.io/
3ã€ç°æœ‰çš„å¼€æºçš„é¡¹ç›®æ˜¯å¦ä½¿ç”¨äº† Netty ?
Dubbo Grpc Spark &amp;hellip;. 4ã€RPC Provider å¯åŠ¨
Netty Server æ–¹å¼å¯åŠ¨ Rpc æœåŠ¡çš„æ³¨å†Œ 5ã€RPC Consumer å¯åŠ¨
Netty Client æ–¹å¼å¯åŠ¨ RPC æ³›åŒ–è°ƒç”¨ã€é€šè¿‡å­—èŠ‚ç åŸºäºåå°„æ¥å®ç°è¿œç¨‹è°ƒåº¦ Consumer æœåŠ¡è®¢é˜… å¯åŠ¨æ—¶å»ºç«‹é•¿è¿æ¥ 6ã€ä»ç¬¬å››å¯ä»¥çœ‹å‡ºï¼Œå¤šä¸ª Provider æ˜¯ç”±ä¸€ä¸ª NettyServer æä¾›çš„ï¼Œé€šè¿‡ HandlerMap æ˜ å°„æ‰¾åˆ°å¯¹åº”çš„ Ioc Beanï¼Œå®ŒæˆæœåŠ¡è°ƒç”¨</description></item><item><title>Stringä¸ºä»€ä¹ˆè®¾è®¡æˆfinal</title><link>https://pinkhello.cc/posts/03-string%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%BE%E8%AE%A1%E6%88%90final/</link><pubDate>Tue, 12 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/03-string%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%BE%E8%AE%A1%E6%88%90final/</guid><description>Stringæºç å‰–æ public final class String implements java.io.Serializable, Comparable&amp;lt;String&amp;gt;, CharSequence { /** The value is used for character storage. */ private final char value[]; /** Cache the hash code for the string */ private int hash; // Default to 0 /** use serialVersionUID from JDK 1.0.2 for interoperability */ private static final long serialVersionUID = -6849794470754667710L; /** * Class String is special cased within the Serialization Stream Protocol.</description></item><item><title>å…³äºfinalçš„æ€è€ƒ</title><link>https://pinkhello.cc/posts/02-%E5%85%B3%E4%BA%8Efinal%E7%9A%84%E6%80%9D%E8%80%83/</link><pubDate>Mon, 11 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/02-%E5%85%B3%E4%BA%8Efinal%E7%9A%84%E6%80%9D%E8%80%83/</guid><description>å…³äºfinalçš„æ€è€ƒ final æ˜¯å£°æ˜æ•°æ®åŸŸæœ€ç»ˆçš„,ä¸å¯ä»¥ä¿®æ”¹çš„ï¼Œå¸¸è§çš„ æ˜¯ç±»çš„ åºåˆ—åŒ–ID String ç±»ï¼Œå…¶æ•°æ®åŸŸéƒ½æ˜¯ final çš„ ä¿®æ”¹ final ä¿®é¥°çš„å±æ€§ åå°„ä¿®æ”¹ final ä¿®é¥°çš„æ•°æ®åŸŸã€éå¸¸æˆåŠŸçš„ä¿®æ”¹äº†ã€‘
public class Test { private final String name = &amp;#34;hello world&amp;#34;; public static void main(String[] args) throws NoSuchFieldException, IllegalAccessException { Test test = new Test(); Field field = test.getClass().getDeclaredField(&amp;#34;name&amp;#34;); field.setAccessible(true); field.set(test,&amp;#34;HELLO, WORLD!&amp;#34;); System.out.println(field.get(test)); System.out.println(test.name); } } è¾“å‡º Hello, WORLD! hello world ç¬¬ä¸€ä¸ªè¾“å‡ºæ˜¯å› ä¸ºè¯´æ˜è¿è¡ŒæˆåŠŸï¼Œä¿®æ”¹finalä¿®é¥°çš„å¯¹è±¡çš„å±æ€§æˆåŠŸä¿®æ”¹ï¼›
ä½†æ˜¯ç¬¬äºŒä¸ªè¾“å‡ºï¼Œè¡¨æ˜äº†æˆ‘ç›´æ¥ä½¿ç”¨ name çš„å±æ€§å´è¿˜æ˜¯è¾“å‡ºç«¯é¢åŸæ¥çš„å€¼.</description></item><item><title>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</title><link>https://pinkhello.cc/posts/01-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</link><pubDate>Sun, 10 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/01-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</guid><description>åˆ†å¸ƒå¼å‡è¡¡å¯»å€ç®—æ³• åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­ï¼Œå¯¹æœºå™¨çš„æ·»åŠ åˆ é™¤ï¼Œæˆ–è€…æœºå™¨æ•…éšœåè‡ªåŠ¨è„±è½é›†ç¾¤çš„æ“ä½œæ˜¯åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†çš„åŸºæœ¬åŠŸèƒ½ã€‚
åœ¨é›†ç¾¤ç¯å¢ƒä¸­ï¼Œåˆ¤æ–­åˆ†å¸ƒå¼å¯»å€ç®—æ³•å¥½åçš„åŸåˆ™ï¼š
å¹³è¡¡æ€§ï¼ˆBalanceï¼‰ å•è°ƒæ€§ï¼ˆMonotonicityï¼‰ åˆ†æ•£æ€§ï¼ˆSpreadï¼‰ è´Ÿè½½ï¼ˆLoadï¼‰ Hash(Object)%N é›†ç¾¤Nå°æœºå™¨ï¼Œæ ¹æ®Nå–æ¨¡ï¼Œè·¯ç”±åˆ°å¯¹åº”çš„æœºå™¨ï¼Œä½†æ˜¯ç¼ºç‚¹åœ¨äºï¼Œå¯¹äºæœºå™¨çš„æ·»åŠ åˆ é™¤ï¼Œå·²ç»ç¼“å­˜çš„æ•°æ®éƒ½å¤±æ•ˆã€ä¸¥é‡è¿åå•è°ƒæ€§ï¼Œ å¤§é‡çš„ç¼“å­˜é‡å»º
å‡è®¾0-3ä¸ªèŠ‚ç‚¹ã€20ä¸ªæ•°æ®: è¿›è¡Œå–æ¨¡ååˆ†å¸ƒ: æ‰©å®¹å: å½“å‰åªæœ‰4ä¸ªæ•°æ®èƒ½å‘½ä¸­ã€‚å‘½ä¸­ç‡ 4/20 = 20% ,å‘½ä¸­ç‡åº•ä¸‹ï¼Œå¹¶ä¸”æœ‰å¤§é‡ç¼“å­˜éœ€è¦é‡å»º
ä¸€è‡´æ€§Hash ( DHT ) å…¬å…±å“ˆå¸Œå‡½æ•°å’Œå“ˆå¸Œç¯ Hashç®—æ³•è®¾è®¡: é‡‡å–å–æ¨¡æ–¹å¼ï¼ŒæŒ‰å¸¸ç”¨çš„ Hash ç®—æ³•å°†å¯¹åº”çš„ Key å“ˆå¸Œåˆ°ä¸€ä¸ªå…·æœ‰ 2^32 æ¬¡æ–¹çš„æ¡¶ç©ºé—´ä¸­ï¼Œå³ 0 ~ (2^32)-1 çš„æ•°å­—ç©ºé—´ã€‚æƒ³æƒ³ä¸€ä¸‹ï¼Œå°†æ•°å­—é¦–ä½ç›¸è¿ï¼Œç»„æˆä¸€ä¸ªé—­åˆçš„ç¯å½¢ã€‚ å¯¹è±¡(Object)æ˜ å°„åˆ°å“ˆå¸Œç¯ æŠŠå¯¹è±¡æ˜ å°„åˆ° 0-2^32-1 ç©ºé—´é‡Œï¼Œå‡è®¾æœ‰4ä¸ªå¯¹è±¡ object1-4 ï¼Œæ˜ å°„è¿›hashç¯çŠ¶ ç¼“å­˜(Cache)æ˜ å°„åˆ°å“ˆå¸Œç¯ ä¸‹é¢å°† Cache æ˜ å°„è¿› Hash ç©ºé—´ï¼Œå‡è®¾ç°åœ¨æœ‰ä¸‰ä¸ªcacheï¼š
åŸºæœ¬æ€æƒ³å°±æ˜¯ Object å’Œ Cache éƒ½æ˜ å°„åˆ°åŒä¸€ Hash æ•°å€¼ç©ºé—´ä¸­ï¼Œå¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„ Hashç®—æ³•ï¼Œå¯ä»¥ä½¿ç”¨ Cache çš„ IPåœ°å€æˆ–è€…å…¶ä»–å› å­ï¼‰</description></item><item><title>Threadlocal é­”æ³•</title><link>https://pinkhello.cc/posts/00-threadlocal-%E9%AD%94%E6%B3%95/</link><pubDate>Sat, 09 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/00-threadlocal-%E9%AD%94%E6%B3%95/</guid><description>ThreadLocal è¯¦è§£ å‰è¨€ å¯¹äº ThreadLocal çš„ä½¿ç”¨ï¼Œå¹¶ä¸éš¾ï¼Œè¿™æ¬¡ä¸»è¦è®²è¿° ThreadLocal çš„å®ç°æ–¹å¼ä»¥åŠåŸç†
ThreadLocal æ˜¯ä»€ä¹ˆ ThreadLocal ä¸ºè§£å†³å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜æä¾›çš„ä¸€ç§æ–°çš„æ€è·¯ã€‚
å½“ä½¿ç”¨ ThreadLocal ç»´æŠ¤å˜é‡çš„æ—¶å€™ï¼ŒThreadLocal ä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹ä¿®æ”¹è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šä¿®æ”¹åˆ°å…¶ä»–äººçš„å˜é‡å‰¯æœ¬ã€‚
ä»çº¿ç¨‹è§’åº¦çœ‹ï¼ŒLocal å³æœ¬åœ°æ„æ€ï¼Œç›®æ ‡å˜é‡å°±åƒæ˜¯çº¿ç¨‹çš„æœ¬åœ°å˜é‡ã€‚
åŸç† ThreadLocal æ˜¯è¿æ¥ Thread ä¸ ThreadLocalMap ç²˜åˆå‰‚ï¼Œæ˜¯ç”¨æ¥å¤„ç† Thread çš„ ThreadLocalMap å±æ€§ï¼Œ åŒ…æ‹¬ initialValue() å˜é‡ï¼Œset å¯¹åº”çš„å˜é‡ï¼Œget å¯¹åº”çš„å˜é‡ã€‚
ThreadLocalMap ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œé‡‡ç”¨ç±»ä¼¼HashMapçš„æœºåˆ¶ï¼Œå­˜å‚¨äº†ä»¥ThreadLocalä¸ºKeyï¼Œç›®æ ‡æ•°æ®ä¸ºValueçš„Entryé”®å€¼å¯¹æ•°ç»„ç»“æ„ã€‚
Thread æœ‰ä¸ª ThreadLocalMap çš„å±æ€§ï¼Œå­˜å‚¨çš„æ•°æ®å­˜æ”¾åœ¨æ­¤å¤„ã€‚
Threadã€ThreadLocalã€ ThreadLocalMapçš„å…³ç³» ThreadLocalMap æ˜¯ ThreadLocal çš„å†…éƒ¨ç±»ï¼Œæœ‰ ThreadLocalåˆ›å»ºï¼ŒThreadæœ‰ ThreadLocal.ThreadLocalMap ç±»å‹çš„å±æ€§ï¼Œæºç å¦‚ä¸‹
Thread public class Thread implements Runnable { /* * ThreadLocal values pertaining to this thread. This map is maintained * by the ThreadLocal class.</description></item><item><title>æ•°æ®ç»“æ„ä¸ç®—æ³• 01 ä¼˜å…ˆé˜Ÿåˆ—</title><link>https://pinkhello.cc/posts/00-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95-01-%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/</link><pubDate>Sat, 09 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/00-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95-01-%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/</guid><description>ä¸ºä»€ä¹ˆéœ€è¦ä¼˜å…ˆé˜Ÿåˆ— é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ‰€æœ‰å…ƒç´ ä¼˜å…ˆçº§ä¸€æ ·ï¼Œå®Œå…¨éµå®ˆå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™ã€‚ä½†æ˜¯å¾€å¾€ç°å®æƒ…å†µä¸‹ï¼Œè¿™ç§å…¬å¹³éœ€è¦è¢«æ‰“ç ´ã€‚å®ƒæ˜¯ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„è¿‡ç¨‹ï¼Œå¯èƒ½æœ‰ä¸€äº›éœ€è¦ä¼˜å…ˆï¼Œä¸€äº›éœ€è¦é™ä½ä¼˜å…ˆçº§ã€‚ä¸”è¿™äº›æ•°æ®æ˜¯ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ç»´ç³»è¿™ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚
ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°æ–¹å¼ æ•°ç»„å®ç° é“¾è¡¨</description></item><item><title>ç®—æ³• Bitmap</title><link>https://pinkhello.cc/posts/00-%E7%AE%97%E6%B3%95-bitmap/</link><pubDate>Sat, 09 Feb 2019 10:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/00-%E7%AE%97%E6%B3%95-bitmap/</guid><description>bitmap åŸç† bitmapå­—é¢ä¸ºä½å›¾æ˜ å°„, åŸç†æ˜¯ä½¿ç”¨ä¸€ä¸ª bit æ ‡è®°æŸä¸ªå…ƒç´ å¯¹åº”çš„ valueï¼Œè€Œ key å³è¯¥å…ƒç´ ã€‚å› ä¸ºåªæœ‰ä¸€ä¸ª bit æ¥å­˜å‚¨ä¸€ä¸ªæ•°æ®, å› è€Œå¯ä»¥å¤§å¤§çš„èŠ‚çœç©ºé—´ã€‚
æ•°å€¼æ˜ å°„: å‡å¦‚å¯¹ 0-31 ä¸ªå†…çš„3ä¸ªå…ƒç´ ï¼ˆ10, 17, 28ï¼‰è¿›è¡Œæ’åº,å¯ä»¥é‡‡ç”¨ BitMap æ–¹æ³•, å¦‚ä¸‹å›¾, å¯¹åº”çš„åŒ…å«çš„ä½ç½®å°†å¯¹åº”çš„å€¼ä» 0 å˜æ›´ä¸º 1 å‡å¦‚éœ€è¦è¿›è¡Œæ’åºå’Œæ£€ç´¢ï¼Œåªéœ€è¦ä¾æ¬¡éå†è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œç¢°åˆ° 1 çš„æƒ…å†µï¼Œæ•°æ®å­˜åœ¨
å­—ç¬¦ä¸²æ˜ å°„: å­—ç¬¦ä¸²ä¹Ÿå¯æ˜ å°„ï¼Œåªä¸è¿‡éœ€è¦ç»è¿‡ä¸€ä¸ªHashæ­¥éª¤,é€šè¿‡æ˜ å°„å…³ç³»å¯ä»¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ã€‚ä½†æ˜¯å› ä¸º Hashæ˜¯å°†ä¸ç¡®å®šé•¿åº¦çš„å€¼å˜æ›´ä¸ºç¡®å®šå¤§å°çš„å€¼,å­˜åœ¨Hashå†²çªæ€§ï¼Œæ‰€ä»¥ä¸€èˆ¬è¦æœ€å¤§åŒ–çš„åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦çœŸçš„å­˜åœ¨ï¼Œå¯ä»¥å°†è¿™ä¸ªå­—ç¬¦ä¸²ç»è¿‡ä¸åŒçš„Hashå‡½æ•°æ˜ å°„ä¸åŒçš„ä½ç½®ã€‚
bitmap çš„ å»ºç«‹ã€æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€åˆ¤æ–­ åŸç† å»ºç«‹ Bitmap çš„åˆ›å»ºå¯ä»¥ä½¿ç”¨ byte æ•°ç»„ï¼Œ 1 byte = 8 bit (ä¹Ÿå¯ä½¿ç”¨ int æ•°ç»„, 1 int = 32 bit, long æ•°ç»„, 1 long = 64 bit) ä¹Ÿå°±æ˜¯è¯´åˆ°æœ€åçš„æ•°æ®çš„å¤§å°å»ºç«‹åªéœ€è¦åˆ›å»º æ•°ç»„é•¿åº¦ä¸º int[ 1 + N/32 ] byte[ 1 + N/8 ] long[ 1 + N/64 ] å³å¯å­˜å‚¨ï¼ŒNè¡¨ç¤ºè¦å­˜å‚¨çš„æœ€å¤§çš„å€¼ã€‚</description></item></channel></rss>
<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>k8s on pinkhello</title><link>https://pinkhello.cc/tags/k8s/</link><description>Recent content in k8s on pinkhello</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>pinkhello</copyright><lastBuildDate>Tue, 18 May 2021 08:00:00 +0800</lastBuildDate><atom:link href="https://pinkhello.cc/tags/k8s/index.xml" rel="self" type="application/rss+xml"/><item><title>å›æœ›K8S æŒä¹…åŒ–å­˜å‚¨</title><link>https://pinkhello.cc/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</link><pubDate>Tue, 18 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</guid><description>PVã€PVCã€StorageClass è¯´çš„å•¥ï¼Ÿ PV: æŒä¹…åŒ–å­˜å‚¨æ•°æ®å·ï¼Œè¿™ä¸ª API ä¸»è¦å®šä¹‰çš„æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨åœ¨å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªç›®å½•ã€‚ä¸€èˆ¬ç”±è¿ç»´äººå‘˜è¿›è¡Œå®šä¹‰ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ª NFS ç±»å‹çš„ PV
apiVersion: v1 kind: PersistentVolume metadata: name: nfs spec: storageClassName: manual capacity: storage: 1Gi accessModes: - ReadWriteMany nfs: server: 10.244.1.5 path: &amp;#34;/&amp;#34; PVC: POD æ‰€å¸Œæœ›ä½¿ç”¨çš„æŒä¹…åŒ–å­˜å‚¨çš„å±æ€§. æ¯”å¦‚ Volume çš„å­˜å‚¨å¤§å°ã€å¯è¯»å†™æƒé™ç­‰. PVC ä¸€èˆ¬ç”±å¼€å‘äººå‘˜åˆ›å»ºã€æˆ–è€…ç”± PVCæ¨¡æ¿çš„æ–¹å¼æˆä¸ºStatefulSetçš„ä¸€éƒ¨åˆ†ï¼Œç”±StatefulSetæ§åˆ¶å™¨è´Ÿè´£åˆ›å»ºå¸¦ç¼–å·çš„PVC.
# åˆ›å»ºä¸€ä¸ª 1 GB å¤§å°çš„PVC --- apiVersion: v1 kind: PersistentVolumeClaim metadata: name: nfs spec: accessModes: - ReadWriteMany storageClassName: manual resources: requests: storage: 1Gi ... ç”¨æˆ·åˆ›å»ºçš„PVCè¦çœŸæ­£çš„è¢«å®¹å™¨ä½¿ç”¨çš„åŒ–ï¼Œéœ€è¦äºå¿ƒå’ŒæŸä¸ªç¬¦åˆæ¡ä»¶çš„PVè¿›è¡Œç»‘å®šï¼š
ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼ŒPV å’Œ PVC çš„ spec å­—æ®µã€‚ä¾‹å¦‚: PV çš„å­˜å‚¨(storage)å¤§å°å°±å¿…é¡»æ»¡è¶³ PVC çš„è¦æ±‚ ç¬¬äºŒä¸ªæ¡ä»¶ï¼ŒPV å’Œ PVC çš„ storageClassName å­—æ®µåç§°å¿…é¡»ä¸€æ ·ã€‚ ä¸‹é¢æ˜¯å»ä½¿ç”¨è¿™ä¸ªPVC</description></item><item><title>å›æœ›K8S å®¹å™¨ç¼–æ’ä¸Kubernetesä½œä¸šç®¡ç†</title><link>https://pinkhello.cc/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/</link><pubDate>Mon, 17 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/</guid><description>Pod pod æ˜¯ Kubernetes é¡¹ç›®çš„æœ€å°çš„ API å¯¹è±¡ï¼ŒåŸå­è°ƒåº¦å•ä½.
å‡è®¾ &amp;ldquo;å®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹&amp;rdquo;ï¼Œå®¹å™¨é•œåƒå°±æ˜¯ exe å®‰è£…åŒ…, kubernetes æ˜¯æ“ä½œç³»ç»Ÿ
Pod æœ€é‡è¦çš„ä¸€ä¸ªäº‹å®æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µã€‚å®ƒå¯¹äº Kubernetes æœ€æ ¸å¿ƒçš„æ„ä¹‰æ˜¯ å®¹å™¨è®¾è®¡æ¨¡å¼ã€‚Kubernetes çœŸæ­£å¤„ç†çš„è¿˜æ˜¯å®¿ä¸»æœºä¸Šæ“ä½œç³»ç»Ÿä¸Šçš„ Linux å®¹å™¨çš„ Namespace å’Œ Cgroupsï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ‰€è°“çš„ Pod è¾¹ç•Œå’Œéš”ç¦»ç¯å¢ƒã€‚
Pod å…¶å®æ˜¯ä¸€ç»„å…±äº«äº†æŸäº›èµ„æºçš„å®¹å™¨ã€‚Pod é‡Œé¢æ‰€æœ‰çš„å®¹å™¨ï¼Œå…±äº«çš„åŒä¸€ä¸ª Network Namespaceï¼Œå¹¶ä¸”å¯ä»¥å£°æ˜å…±äº«åŒä¸€ä¸ª Volume.
Kubernetes é¡¹ç›®å†…éƒ¨ï¼ŒPod å®ç°éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸­é—´å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨å«åš Infra å®¹å™¨ï¼Œåœ¨ Pod ä¸­ï¼ŒInfra å®¹å™¨æ°¸è¿œéƒ½æ˜¯ç¬¬ä¸€ä¸ªè¢«åˆ›å»ºçš„å®¹å™¨ï¼Œè€Œå…¶ä»–ç”¨æˆ·å®šä¹‰çš„å®¹å™¨ï¼Œåˆ™é€šè¿‡ Join Network Namespace çš„æ–¹å¼ï¼Œä¸ Infra å®¹å™¨å…³è”åœ¨ä¸€èµ·ã€‚
sidecar å…¸å‹çš„ä¾‹å­ï¼šWAR åŒ…å’Œ Web æœåŠ¡å™¨ PODåï¼Œå°† WAR åŒ…å’Œ Tomcat åˆ†åˆ«åšæˆé•œåƒï¼Œå¯ä»¥æŠŠä»–ä»¬å®¹å™¨ç»“åˆåœ¨ä¸€èµ·
--- apiVersion: v1 kind: Pod metadata: name: javaweb-2 spec: # å¯åŠ¨ååšäº†ä¸€ä»¶äº‹ æŠŠåº”ç”¨çš„WARåŒ…æ‹·è´åˆ° /appç›®å½•ä¸­ï¼Œåé€€å‡º initContainers: - image: sample-war:v2 name: war command: [&amp;#34;cp&amp;#34;, &amp;#34;/sample.</description></item><item><title>å›æœ›K8S Kubernetesæ‹¼å›¾</title><link>https://pinkhello.cc/posts/19-%E5%9B%9E%E6%9C%9Bk8s-kubernetes%E6%8B%BC%E5%9B%BE/</link><pubDate>Sun, 16 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/19-%E5%9B%9E%E6%9C%9Bk8s-kubernetes%E6%8B%BC%E5%9B%BE/</guid><description>kubernetes å®‰è£… all èŠ‚ç‚¹å®‰è£… Docker å’Œ Kubeadm æ‰€æœ‰èŠ‚ç‚¹ root ç”¨æˆ·ä¸‹æ“ä½œ
&amp;gt; curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - &amp;gt; cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/apt/sources.list.d/kubernetes.list deb http://apt.kubernetes.io/ kubernetes-xenial main EOF &amp;gt; apt-get update # è¿™ä¸€æ­¥å®‰è£…çš„æ—¶å€™ kubeadm å’Œ kubeletã€kubectlã€kubernetes-cni éƒ½ä¼šè‡ªåŠ¨å®‰è£…å®Œæ¯• &amp;gt; apt-get install -y docker.io kubeadm æç¤ºï¼šå¦‚æœ apt.kubernetes.io å› ä¸ºç½‘ç»œé—®é¢˜è®¿é—®ä¸åˆ°ï¼Œå¯ä»¥æ¢æˆä¸­ç§‘å¤§çš„ Ubuntu é•œåƒæº deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial mainã€‚
éƒ¨ç½² Kubernetes Master å£°æ˜ä¸€ä¸ª kubeadm.yaml
--- apiVersion: kubeadm.k8s.io/v1alpha1 kind: MasterConfiguration controllerManagerExtraArgs: # é…ç½®äº†è‡ªå®šä¹‰è‡ªåŠ¨æ°´å¹³æ‰©å±• horizontal-pod-autoscaler-use-rest-clients: &amp;#34;true&amp;#34; horizontal-pod-autoscaler-sync-period: &amp;#34;10s&amp;#34; node-monitor-grace-period: &amp;#34;10s&amp;#34; apiServerExtraArgs: runtime-config: &amp;#34;api/all=true&amp;#34; # kubeadm éƒ¨ç½²çš„ kubernetes çš„ç‰ˆæœ¬ kubernetesVersion: &amp;#34;stable-1.</description></item><item><title>å›æœ›K8S ç™½è¯å®¹å™¨</title><link>https://pinkhello.cc/posts/18-%E5%9B%9E%E6%9C%9Bk8s-%E7%99%BD%E8%AF%9D%E5%AE%B9%E5%99%A8/</link><pubDate>Sat, 15 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/18-%E5%9B%9E%E6%9C%9Bk8s-%E7%99%BD%E8%AF%9D%E5%AE%B9%E5%99%A8/</guid><description>è¿›ç¨‹å¼€å¯ å®¹å™¨, åˆ°åº•æ˜¯ä»€ä¹ˆ? å‰é¢æå‡º: å®¹å™¨æ˜¯ä¸€ç§æ²™ç›’æŠ€æœ¯. å°±æ˜¯ä¸€ä¸ªé›†è£…ç®±, æŠŠåº”ç”¨è£…èµ·æ¥çš„æŠ€æœ¯. è¿™æ ·, åº”ç”¨ä¸åº”ç”¨ä¹‹é—´æœ‰äº†è¾¹ç•Œä¸è‡³äºäº’ç›¸å¹²æ‰°; æœ‰äº†è¿™äº›é›†è£…ç®±, ä¹Ÿæ–¹ä¾¿æ¬æ¥æ¬å».
ç å†œéƒ½çŸ¥é“å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä»£ç çš„å¯æ‰§è¡Œé•œåƒ(executable image). ä¸€æ—¦ç¨‹åºæ‰§è¡Œèµ·æ¥, å†…å­˜æ•°æ®ã€å¯„å­˜å™¨çš„å€¼ã€å †æ ˆçš„æŒ‡ä»¤ã€æ‰“å¼€çš„æ–‡ä»¶ç­‰è¿™äº›é›†åˆæ±‡é›†æˆä¸€ä¸ªç¨‹åºçš„è®¡ç®—æœºæ‰§è¡Œç¯å¢ƒæ€»å’Œ: è¿›ç¨‹.
è¿›ç¨‹: é™æ€è¡¨ç°æ˜¯ç¨‹åº, åŠ¨æ€è¡¨ç°è®¡ç®—æœºçš„æ•°æ®å’ŒçŠ¶æ€çš„æ€»å’Œã€‚
å®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½, å°±æ˜¯é€šè¿‡çº¦æŸå’Œä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€è¡¨ç°, ä»è€Œä¸ºå…¶åˆ›é€ ä¸€ä¸ª&amp;quot;è¾¹ç•Œ&amp;quot;.
Cgroups æŠ€æœ¯ åˆ¶é€ çº¦æŸçš„ä¸»è¦æ‰‹æ®µ Namespace æŠ€æœ¯ ä¿®æ”¹è¿›ç¨‹è§†å›¾çš„ä¸»è¦æ–¹æ³• docker run , -it å‘Šè¯‰ Docker å¯åŠ¨å®¹å™¨å, éœ€è¦åˆ†é…ä¸€ä¸ªæ–‡æœ¬è¾“å…¥/è¾“å‡ºç¯å¢ƒ, ä¹Ÿå°±æ˜¯ TTY, è·Ÿå®¹å™¨çš„æ ‡å‡†è¾“å…¥ç›¸å…³è”, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å’Œè¿™ä¸ªDockerå®¹å™¨è¿›è¡Œäº¤äº’äº†ã€‚è€Œ /bin/sh å°±æ˜¯æˆ‘ä»¬åœ¨ Docker å®¹å™¨é‡Œè¿è¡Œçš„ç¨‹åº.
&amp;gt; docker run -it busybox /bin/sh / # å¸®æˆ‘å¯åŠ¨ä¸€ä¸ªå®¹å™¨, åœ¨å®¹å™¨é‡Œæ‰§è¡Œ /bin/sh, å¹¶ä¸”ç»™æˆ‘åˆ†é…ä¸€ä¸ªå‘½ä»¤è¡Œç»ˆç«¯è·Ÿè¿™ä¸ªå®¹å™¨è¿›è¡Œäº¤äº’, åœ¨è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸‹å¯ä»¥å®Œå…¨æ‰§è¡ŒLINUXå‘½ä»¤,ä¸”ä¸å®¿ä¸»æœºå®Œå…¨éš”ç¦»åœ¨ä¸åŒçš„ä¸–ç•Œä¸­.
Dockerå¯¹è¢«éš”ç¦»åº”ç”¨çš„è¿›ç¨‹ç©ºé—´åšäº†æ‰‹è„š, ä½¿å¾—è¿™äº›è¿›ç¨‹åªèƒ½çœ‹åˆ°é‡æ–°è®¡ç®—çš„è¿›ç¨‹ç¼–å·, å¯æ˜¯å®é™…ä¸Š, ä»–ä»¬åœ¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿé‡Œ, è¿˜æ˜¯åŸæ¥çš„ç¬¬Nå·è¿›ç¨‹. è¿™ç§æŠ€æœ¯å°±æ˜¯Linuxå†…éƒ¨çš„Namespaceæœºåˆ¶ã€‚
Namespace çš„ä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸æœ‰æ„æ€ï¼šå®ƒå…¶å®åªæ˜¯ Linux åˆ›å»ºæ–°è¿›ç¨‹çš„ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­åˆ›å»ºçº¿ç¨‹çš„ç³»ç»Ÿè°ƒç”¨æ˜¯ clone()ï¼Œæ¯”å¦‚ï¼š</description></item><item><title>å›æœ›K8S å°é²¸é±¼å®¹å™¨æŠ€æœ¯</title><link>https://pinkhello.cc/posts/17-%E5%9B%9E%E6%9C%9Bk8s-%E5%B0%8F%E9%B2%B8%E9%B1%BC%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/</link><pubDate>Fri, 14 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/17-%E5%9B%9E%E6%9C%9Bk8s-%E5%B0%8F%E9%B2%B8%E9%B1%BC%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/</guid><description>ä»€ä¹ˆæ˜¯å®¹å™¨ åœ¨å®¹å™¨ä¹‹å‰, ç«çˆ†äº‘è®¡ç®—å¸‚åœºçš„æ˜¯ PAAS, PAASå·²ç»æ·±å…¥äººå¿ƒ. é‚£æ—¶å€™çªç„¶æœ‰ä¸€å®¶å…¬å¸ dotCloud å‰‘èµ°åé”‹, ç›´æ¥å¼€æºå‡ºäº† Docker é¡¹ç›®ï¼Œå¹¶ä¸”ç›´æ¥é¢å‘çš„ç¤¾åŒºã€‚ è¿™æ ·çš„åšæ³•ç›´æ¥å°†å½“æ—¶çš„PAASæµä¸»è¦å…¬å¸æ‰“çš„å±æ»šå°¿æµã€‚
å›å¤´çœ‹, PAAS æœ€æ ¸å¿ƒçš„æ˜¯éš”ç¦»ç¯å¢ƒ,æˆ–è€…å« æ²™ç›’,åœ¨æˆ‘çœ‹æ¥ä¹Ÿå°±æ˜¯ å®¹å™¨. è€Œ Docker é¡¹ç›®å’Œ Cloud Foundry çš„å®¹å™¨æ²¡æœ‰å¤ªå¤§çš„ä¸åŒ,ä½†æ˜¯å®ƒä¸ºä»€ä¹ˆèƒ½é’ˆå¯¹ PAASè¿›è¡Œäº†ä¸€åœºå¿«é€Ÿçš„é—ªç”µæˆ˜å‘¢ï¼Ÿ
å¯¹çš„, å°±æ˜¯ Docker é•œåƒ, è¿™ä¸ªå°å°çš„åˆ›æ–°, è¿…é€Ÿæ”¹å˜äº†äº‘è®¡ç®—çš„å‘å±•è½¨è¿¹! Docker é•œåƒè§£å†³çš„æ˜¯ æ‰“åŒ… é—®é¢˜ã€‚ä¹Ÿè®¸æœ‰äººè¯´Docker é•œåƒå°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ã€‚ä½†æ˜¯å°±æ˜¯è¿™ä¸ªå‹ç¼©åŒ…åŒ…å«äº†å®Œæ•´çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•, åŒ…å«äº†æ•´ä¸ªåº”ç”¨æ‰€éœ€è¦çš„ä¾èµ–ï¼Œä¸€åŒ…åœ¨æ‰‹, ä½ å¯ä»¥è½»æ˜“çš„è¿è¡Œä½ çš„æ²™ç›’,å¹¶ä¸”æœ¬åœ°ç¯å¢ƒä¸äº‘ç«¯ç¯å¢ƒé«˜åº¦ä¸€è‡´ï¼ˆè¿™æ˜¯æœ€å®è´µçš„ï¼‰ã€‚
Dockerç»™PAASè¿›è¡Œäº†è‡´å‘½æ‰“å‡», æä¾›äº†ä¾¿åˆ©çš„æ‰“åŒ…æœºåˆ¶, é¢å‘åç«¯å¼€å‘è€…æ¥è¯´, å±è”½äº†æœºå™¨ã€å†…æ ¸ç­‰æŠ€æœ¯ç»†èŠ‚, é¿å…äº†åœ¨ä¸åŒç¯å¢ƒé—´çš„å·®å¼‚å¼•å…¥çš„è¯•é”™æˆæœ¬ã€‚æ˜¯ä¸€æ¬¡è§£æ”¾ç”Ÿäº§åŠ›çš„é©å‘½ã€‚å½“ç„¶å¾ˆå¤šå¼€å‘è€…ç”¨è„šæŠ•ç¥¨, äº†ç»“äº†PAASæ—¶ä»£ã€‚
Docker ä¸‰å¤§åˆ©å™¨ Dockeré¡¹ç›®çš„é«˜è°ƒå¼€æº, è§£å†³äº†æ‰“åŒ…å’Œå‘å¸ƒå›°æ‰°è¿ç»´çš„æŠ€æœ¯éš¾é¢˜ï¼ŒåŒæ—¶å®ƒä¹Ÿç¬¬ä¸€æ¬¡çº¯åç«¯çš„æ¦‚å¿µé€šè¿‡å‹å¥½çš„è®¾è®¡å’Œå°è£…äº¤ä»˜åˆ°äº†å¼€å‘è€…çš„æ‰‹é‡Œã€‚ Swarm,Dockeræ˜¯åˆ›å»ºå’Œå¯åœå®¹å™¨çš„å·¥å…·,é‚£ä¹ˆSwarmæ˜¯ä¸ºäº†å‘å¹³å°åŒ–å‘å±•è€Œæå‡ºçš„ã€‚å®ƒæä¾›äº†å®Œæ•´çš„æ•´ä½“å¯¹å¤–æä¾›é›†ç¾¤ç®¡ç†åŠŸèƒ½,å®ƒçš„äº®ç‚¹æ˜¯å®Œå…¨ä½¿ç”¨DockeråŸæœ¬çš„ç®¡ç†å®¹å™¨çš„APIæ¥å®Œæˆé›†ç¾¤ç®¡ç† # Swarmå¤šæœºç¯å¢ƒä¸‹ï¼ŒæŒ‡ä»¤ä¼šè¢«Swarmæ‹¦æˆªå¤„ç†ï¼Œåé¢é€šè¿‡è°ƒåº¦ç®—æ³•æ‰¾åˆ°åˆé€‚çš„Docker Daemonè¿è¡Œ docker run -H &amp;#34;Swarmé›†ç¾¤API&amp;#34; &amp;#34;æˆ‘çš„å®¹å™¨&amp;#34; Compose(Fig)é¡¹ç›®, è¿™æ˜¯ç¬¬ä¸€æ¬¡åœ¨å¼€å‘è€…é¢å‰æå‡º å®¹å™¨ç¼–æ’(Container Orchestration)æ¦‚å¿µã€‚ åº”ç”¨å®¹å™¨ A, æ•°æ®åº“å®¹å™¨B, è´Ÿè½½å‡è¡¡å®¹å™¨C, Compose å…è®¸ Aã€Bã€C ä¸‰ä¸ªå®¹å™¨å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­, å¹¶æŒ‡å®šå…³è”å…³ç³». åªéœ€è¦æ‰§è¡Œ (fig/docker-compose up)</description></item><item><title>è®°ä¸€æ¬¡dockeræ—¥å¿—ç£ç›˜å‘Šè­¦é—®é¢˜</title><link>https://pinkhello.cc/posts/15-%E8%AE%B0%E4%B8%80%E6%AC%A1docker%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98%E5%91%8A%E8%AD%A6%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 10 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/15-%E8%AE%B0%E4%B8%80%E6%AC%A1docker%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98%E5%91%8A%E8%AD%A6%E9%97%AE%E9%A2%98/</guid><description>å‰æ™¯ ä»Šæ—¥ï¼Œæˆ‘æ­£åœ¨å¼€å¼€å¿ƒå¿ƒçš„åˆ·ç€JFXçš„Codingä¸­ï¼Œçªç„¶çº¿ä¸ŠæŠ¥è­¦ç¾¤ä¸­çˆ†äº†ä¸ªç‚¸å¼¹ï¼ŒEC2ç£ç›˜è¶…è¿‡80%ã€‚
å¤„ç†è¿‡ç¨‹ è§£å†³é—®é¢˜å§¿åŠ¿å°±ä½ï¼š
èµ¶ç´§å¼€æœº ==ã€‹ â¤ï¸ä¸­ä¸‡åŒ¹ğŸ¦™å¥”è…¾è€Œè¿‡ â¤ï¸ä¸­MMP
é»˜é»˜çš„é€šè¿‡è·³æ¿æœºè¿›å…¥ç›®æ ‡æœºå™¨
ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€,æ‰§è¡ŒæŸ¥çœ‹ç£ç›˜å ç”¨å¤§å°ï¼Œæˆ‘çš„ä¹–ä¹–ï¼Œå ç”¨ç¡®å®è¶…è¿‡äº†87%äº†ï¼Œä¸€ä¸‹å­æš´æ¶¨çš„
# æŸ¥çœ‹ç£ç›˜å ç”¨å¤§å° &amp;gt; sudo df -h # æŸ¥çœ‹å½“å‰ç›®å½•æ€»é‡ &amp;gt; sudo du -sh å¼€å§‹å®šä½å…·ä½“å“ªä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•å ç”¨è¿™ä¹ˆå¤§,è·‘åˆ°æ ¹ç›®å½•ä¸‹ã€‚ # æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹ä¸€çº§å­æ–‡ä»¶å’Œå­ç›®å½•å ç”¨çš„ç£ç›˜å®¹é‡ &amp;gt; sudo du -lh --max-depth=1 ä¸€å¼€å§‹çŒœæƒ³å¯èƒ½æ˜¯dockerå®¹å™¨çš„æ—¥å¿—å ç”¨å¤§ï¼Œä¸Šé¢æ‰§è¡Œåï¼Œè¿˜çœŸ TM æ˜¯ /var/lib/docker/containers ç›®å½•å ç”¨ 42G å¼€å§‹æŸ¥çœ‹æ˜¯å“ªä¸ªå®¹å™¨å ç”¨çš„è¿™ä¹ˆå¤§çš„ç©ºé—´ # æŸ¥çœ‹ containers æ—¥å¿—ç›®å½•æ’åº &amp;gt; sudo du -d1 -h /var/lib/docker/containers | sort -h # æŸ¥çœ‹å…·ä½“çš„å“ªä¸ªæ—¥å¿—æ–‡ä»¶å¤§ &amp;gt; sudo find /var/lib/docker/containers -name *.log å½“ç„¶è¿™ä¸ªé…å›¾æ˜¯æˆ‘æ¸…ç†ä¹‹åçš„ å®šä½åˆ°æœ€å¤§çš„æ–‡ä»¶ï¼Œä¸€é¡¿æ“ä½œ # æ¸…ç©ºæ¯”è¾ƒå¤§çš„æ—¥å¿—æ–‡ä»¶ &amp;gt; sudo sh -c &amp;#34;cat /dev/null &amp;gt; ${log_file}&amp;#34; æ€è€ƒ ä¸Šé¢çš„æ–¹å¼æ˜¯ä¸€ç§æ–¹å¼è§£å†³ã€ä¸´æ—¶ã€‘ # æŸ¥çœ‹ docker çš„ Logging Driver &amp;gt; docker info | grep &amp;#39;Logging Driver&amp;#39; å¦‚ä½•å½»åº•è§£å†³è¿™ä¸ªé—®é¢˜ï¼š å†™ä¸ªshellè„šæœ¬ ä½¿ç”¨ crontab å®šæœŸæ‰§è¡Œæ¸…ç† #!</description></item></channel></rss>